/*
Comecero Kit version: ï»¿1.0.14
Build time: 2019-06-26T16:53:14.441Z
Checksum (SHA256): acbebaf6e948441852a255f7804b5868f46ece54345c60e261bd6a897d563cb4
https://comecero.com
https://github.com/comecero/kit
Copyright Comecero and other contributors. Released under MIT license. See LICENSE for details.
*/

var utils=function(){function e(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+60*n*1e3);var o="; expires="+r.toUTCString()}else var o="";document.cookie=e+"="+t+o+"; path=/"}function t(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),c_start!=-1)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):null}function n(t){e(t,"",-60)}function r(n,r){var o=t(n);null!=o&&e(n,o,r)}function o(){return a(window.location.href)}function a(e){var t={};if(e.indexOf("#")==-1)return t;for(var n,r=/\+/g,o=/([^&;=]+)=?([^&;]*)/g,a=function(e){return decodeURIComponent(e.replace(r," "))},i=e.substring(e.indexOf("#")+1);n=o.exec(i);)t[a(n[1])]=a(n[2]);return t}function u(){return l(window.location.href)}function l(e){return e.indexOf("?")==-1?{}:(q=e.substring(e.indexOf("?")+1),q.indexOf("#")>0&&(q=q.substring(0,q.indexOf("#"))),c(q))}function c(e){var t={};if(S(e))return t;var n,r=/\+/g,o=/([^&;=]+)=?([^&;]*)/g,a=function(e){return decodeURIComponent(e.replace(r," "))};for(t={};n=o.exec(e);)t[a(n[1])]=a(n[2]);return t}function s(e,t){return 0==t.length?e:(e+="?",_.each(t,function(t,n){e+=n+"="+t+"&"}),e=e.substring(0,e.length-1))}function d(e,t){return t<=0?"":t>String(e).length?e:String(e).substring(0,t)}function p(e,t){if(t<=0)return"";if(t>String(e).length)return e;var n=String(e).length;return String(e).substring(n,n-t)}function m(e){return!isNaN(parseFloat(e))&&isFinite(e)}function f(e){if(0==m(e))return!1;e=parseFloat(e);var t=e===(0|parseInt(e));return t}function g(e){return/\S+@\S+\.\S+/.test(e)}function h(){return Math.floor(1e7*Math.random()+1)}function v(e,t){if(null!=e){var n=e.__proto__||e.constructor.prototype;return t in e&&(!(t in n)||n[t]!==e[t])}return!1}function y(e,t){var n=0;return _.each(e,function(e){v(e,t)&&(n+=e[t])}),n}function b(){for(var e=arguments.length,t=1;t<e;t++)if(null==arguments[t]||arguments[t]!=arguments[t-1])return!1;return!0}function S(e){return null==e||void 0==e||(""==e||null==$(e))}function w(e){for(var t in e)e.hasOwnProperty(t)&&("false"===e[t]&&(e[t]=!1),"true"===e[t]&&(e[t]=!0))}function C(e){return"true"==e}function $(e){return e.replace(/ /g,"")}function E(e,t){return Math.round(e*t*100)/100}function T(e){var t=0,n=0,r=!1;e=e.replace(/\D/g,"");for(var o=e.length-1;o>=0;o--){var a=e.charAt(o);n=parseInt(a,10),r&&(n*=2)>9&&(n-=9),t+=n,r=!r}return t%10==0}function A(e){for(var t in e)if(e.hasOwnProperty(t)){if("[object Object]"===Object.prototype.toString.call(e[t])&&A(e[t]),"[object Array]"===Object.prototype.toString.call(e[t]))for(var n in e[t])A(n);void 0===e[t]&&(e[t]=null)}}function P(e,t,n){for(var r=[];e;e=e.nextSibling)1==e.nodeType&&e!=t&&(n?n.toUpperCase()==e.nodeName.toUpperCase()&&r.push(e):r.push(e));return r}function k(e,t){return P(e.parentNode.firstChild,e,t)}function M(e){function t(e){var t=String(e);return 1===t.length&&(t="0"+t),t}var n=new Date,r="00",o="00",a="00";return e||(r=n.getUTCHours(),o=n.getUTCMinutes(),a=n.getUTCSeconds()),n.getUTCFullYear()+"-"+t(n.getUTCMonth()+1)+"-"+t(n.getUTCDate())+"T"+t(r)+":"+t(o)+":"+t(a)+"Z"}function I(e,t){var n="";for(i=0;i<t;i++)n+=e;return n}function x(e,t,n){_.isString(e)&&(e=c(e)),e=e||{};var r=String(e.hide||"").split(","),o=String(e.expand||"").split(","),a=String(t||"").split(","),i=String(n||"").split(",");return r=_.reject(r,function(e){return a.indexOf(e)>=0}),o=o.concat(i),o=_.uniq(o),e.hide=r.join(","),e.expand=o.join(","),e.hide=D(e.hide,","),e.expand=D(e.expand,","),e}function O(e,t){return e&&e.substring(0,1)==t&&(e=e.substring(1)),e}function N(e,t){return e&&"/"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}function L(e){var t=e.split(","),n=_.uniq(t);return n.join(",")}function D(e,t){return N(O(e,t),t)}function B(e){if("undefined"==typeof e||null==e)return"";var t=e.toString().replace(/[^0-9\.\s]/g,"").trim();return 1==isNaN(t)||""==t.trim()?e:parseFloat(t).toFixed(2)}return{setCookie:e,getCookie:t,deleteCookie:n,getPageHashParameters:o,getHashParameters:a,getPageQueryParameters:u,getQueryParameters:l,appendParams:s,left:d,right:p,isValidNumber:m,isValidInteger:f,getRandom:h,stringsToBool:w,stringToBool:C,hasProperty:v,areEqual:b,sumProperties:y,isNullOrEmpty:S,resetCookieExpiration:r,removeWhitespace:$,luhnCheck:T,undefinedToNull:A,parseQueryParameters:c,isValidEmail:g,getChildrenElements:P,getSiblingElements:k,convert:E,getCurrentIsoDate:M,repeat:I,mergeParams:x,deDuplicateCsv:L,cleanPrice:B}}();String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},app.run(["$rootScope","$http","SettingsService","StorageService","LanguageService","ApiService",function(e,t,n,r,o,a){var i=n.get();i.config.development&&(t.defaults.useXDomain=!0),o.establishLanguage(e.languagesPath)}]);var amazonPay=function(){function e(e,t,n,r,a,i,u){function l(n,r,o,a,i){amazon.Login.setClientId(e),amazon.Login.setUseCookie(!0),OffAmazonPayments.Button(n,t,{type:r||"PwA",color:o||"Gold",size:a||"medium",authorization:function(){var e={scope:"profile payments:widget payments:shipping_address"};authRequest=amazon.Login.authorize(e,function(e){d=e.access_token})},onSignIn:function(e){i&&i(null,{access_token:d,order_reference_id:null,billing_agreement_id:null,seller_id:t})},onError:function(e){i("There was a problem attempting to load the Amazon Pay button."),console.log(e.getErrorMessage())}})}f||o(c,function(){f=!0}),window.amazon?l(n,r,a,i,u):window.onAmazonLoginReady=function(){l(n,r,a,i,u)}}function t(e,t,n,r,o,a,i,u,l,c,f,h){function v(e,t,n,r,o){s=new OffAmazonPayments.Widgets.AddressBook({sellerId:e,onOrderReferenceCreate:function(e){p=e.getAmazonOrderReferenceId()},onAddressSelect:function(e){i&&i()},display_mode:o||"Edit",design:{designMode:r||"responsive"},onReady:function(t){h(null,{access_token:d,order_reference_id:p,billing_agreement_id:null,seller_id:e})},onError:function(e){h("There was a problem attempting to load the Amazon Pay address book."),console.log(e.getErrorMessage())}}).bind(t),wallet=new OffAmazonPayments.Widgets.Wallet({sellerId:e,onPaymentSelect:function(){u&&u()},display_mode:o||"Edit",design:{designMode:r||"responsive"},onError:function(e){h("There was a problem attempting to load the Amazon Pay wallet."),console.log(e.getErrorMessage())}}).bind(n)}function y(e,t,n,r,o,a){var c={sellerId:e,agreementType:"BillingAgreement",onReady:function(t){m=t.getAmazonBillingAgreementId(),wallet=new OffAmazonPayments.Widgets.Wallet({sellerId:e,amazonBillingAgreementId:m,onReady:function(){h(null,{access_token:d,billing_agreement_id:m,seller_id:e})},onPaymentSelect:function(t){u&&u(),consent=new OffAmazonPayments.Widgets.Consent({sellerId:e,amazonBillingAgreementId:m,design:{designMode:o||"responsive"},onReady:function(e){e.getConsentStatus&&g!==utils.stringToBool(e.getConsentStatus())&&(g=!g,l&&l(g))},onConsent:function(e){g!==utils.stringToBool(e.getConsentStatus())&&(g=!g,l&&l(g))},onError:function(e){h("There was a problem attempting to load the Amazon Pay wallet."),console.log(e.getErrorMessage())}}).bind(r)},display_mode:a||"Edit",design:{designMode:o||"responsive"},onError:function(e){h("There was a problem attempting to load the Amazon Pay wallet."),console.log(e.getErrorMessage())}}).bind(n)},onAddressSelect:function(e){i&&i()},display_mode:a||"Edit",design:{designMode:o||"responsive"},onError:function(e){h("There was a problem attempting to load the Amazon Pay wallet."),console.log(e.getErrorMessage())}};s=new OffAmazonPayments.Widgets.AddressBook(c).bind(t)}n?y(t,r,o,a,c,f):(m=null,v(t,r,o,c,f))}function n(e,t,n,r,o,a,i,u){function l(e,t,n,r,o){new OffAmazonPayments.Widgets.Wallet({sellerId:e,amazonOrderReferenceId:t,onPaymentSelect:function(e){r&&r()},design:{designMode:i||"responsive"},onError:function(e){o("There was a problem attempting to load the Amazon Pay wallet."),console.log(e.getErrorMessage())}}).bind(n)}function c(e,t,n,r,o){new OffAmazonPayments.Widgets.Wallet({sellerId:e,billingAgreementId:t,onPaymentSelect:function(e){r&&r()},design:{designMode:i||"responsive"},onError:function(e){o("There was a problem attempting to load the Amazon Pay wallet."),console.log(e.getErrorMessage())}}).bind(n)}amazon.Login.setClientId(e),amazon.Login.setUseCookie(!0),r?c(t,r,o,a,u):l(t,n,o,a,u)}function r(){d=null,p=null,m=null,amazon&&amazon.Login.logout()}function o(e,t){var n=document.getElementsByTagName("head")[0],r=!1,o=document.createElement("script");o.src=e,o.type="text/javascript",o.async=1,o.onload=o.onreadystatechange=function(){r||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!0,"function"==typeof t&&t())},n.appendChild(o)}function a(){return!!(window.__settings&&window.__settings.account&&window.__settings.account.payment_method_types.indexOf("amazon_pay")>-1)}function i(e,t,n,r){var o=document.getElementById(e),a=document.getElementById(t),i=document.getElementById(n);o&&o.style.removeProperty("display"),a&&a.style.removeProperty("display"),i&&r&&i.style.removeProperty("display")}function u(e,t,n){var r=document.getElementById(e),o=document.getElementById(t),a=document.getElementById(n);r&&(r.style.display="none",r.innerHTML=""),o&&(o.style.display="none",o.innerHTML=""),a&&(a.style.display="none",a.innerHTML="")}function l(){return g}var c="https://static-na.payments-amazon.com/OffAmazonPayments/us/js/Widgets.js";window.__settings.account.test&&(c="https://static-na.payments-amazon.com/OffAmazonPayments/us/sandbox/js/Widgets.js");var s,d=null,p=null,m=null,f=!1,g=!1;return a()&&o(c,function(){f=!0}),{createPaymentButton:e,loadWidgets:t,showWidgets:i,hideWidgets:u,reRenderWidgets:n,logout:r,getConsentStatus:l}}(),saveAs=saveAs||function(e){"use strict";if(!("undefined"==typeof e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=4e4,s=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,c)},d=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,n||e)}catch(e){u(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},m=function(t,u,c){c||(t=p(t));var m,f=this,g=t.type,h=g===l,v=function(){d(f,"writestart progress write writeend".split(" "))},y=function(){if(h&&i&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=r.result;e.location.href="data:attachment/file"+t.slice(t.search(/[,;]/)),f.readyState=f.DONE,v()},r.readAsDataURL(t),void(f.readyState=f.INIT)}if(m||(m=n().createObjectURL(t)),h)e.location.href=m;else{var o=e.open(m,"_blank");o||(e.location.href=m)}f.readyState=f.DONE,v(),s(m)};return f.readyState=f.INIT,o?(m=n().createObjectURL(t),void setTimeout(function(){r.href=m,r.download=u,a(r),v(),s(m),f.readyState=f.DONE})):void y()},f=m.prototype,g=function(e,t,n){return new m(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return saveAs}),function(){function e(e){function t(t,n,r,o,a,i){for(;a>=0&&i>a;a+=e){var u=o?o[a]:a;r=n(r,t[u],u,t)}return r}return function(n,r,o,a){r=b(r,a,4);var i=!T(n)&&y.keys(n),u=(i||n).length,l=e>0?0:u-1;return arguments.length<3&&(o=n[i?i[l]:l],l+=e),t(n,r,o,i,l,u)}}function t(e){return function(t,n,r){n=S(n,r);for(var o=E(t),a=e>0?0:o-1;a>=0&&o>a;a+=e)if(n(t[a],a,t))return a;return-1}}function n(e,t,n){return function(r,o,a){var i=0,u=E(r);if("number"==typeof a)e>0?i=a>=0?a:Math.max(a+u,i):u=a>=0?Math.min(a+1,u):a+u+1;else if(n&&a&&u)return a=n(r,o),r[a]===o?a:-1;if(o!==o)return a=t(s.call(r,i,u),y.isNaN),a>=0?a+i:-1;for(a=e>0?i:u-1;a>=0&&u>a;a+=e)if(r[a]===o)return a;return-1}}function r(e,t){var n=I.length,r=e.constructor,o=y.isFunction(r)&&r.prototype||u,a="constructor";for(y.has(e,a)&&!y.contains(t,a)&&t.push(a);n--;)a=I[n],a in e&&e[a]!==o[a]&&!y.contains(t,a)&&t.push(a)}var o=this,a=o._,i=Array.prototype,u=Object.prototype,l=Function.prototype,c=i.push,s=i.slice,d=u.toString,p=u.hasOwnProperty,m=Array.isArray,f=Object.keys,g=l.bind,h=Object.create,v=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):o._=y,y.VERSION="1.8.3";var b=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,a){return e.call(t,n,r,o,a)}}return function(){return e.apply(t,arguments)}},S=function(e,t,n){return null==e?y.identity:y.isFunction(e)?b(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return S(e,t,1/0)};var w=function(e,t){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var o=1;r>o;o++)for(var a=arguments[o],i=e(a),u=i.length,l=0;u>l;l++){var c=i[l];t&&void 0!==n[c]||(n[c]=a[c])}return n}},_=function(e){if(!y.isObject(e))return{};if(h)return h(e);v.prototype=e;var t=new v;return v.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},$=Math.pow(2,53)-1,E=C("length"),T=function(e){var t=E(e);return"number"==typeof t&&t>=0&&$>=t};y.each=y.forEach=function(e,t,n){t=b(t,n);var r,o;if(T(e))for(r=0,o=e.length;o>r;r++)t(e[r],r,e);else{var a=y.keys(e);for(r=0,o=a.length;o>r;r++)t(e[a[r]],a[r],e)}return e},y.map=y.collect=function(e,t,n){t=S(t,n);for(var r=!T(e)&&y.keys(e),o=(r||e).length,a=Array(o),i=0;o>i;i++){var u=r?r[i]:i;a[i]=t(e[u],u,e)}return a},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,n){var r;return r=T(e)?y.findIndex(e,t,n):y.findKey(e,t,n),void 0!==r&&r!==-1?e[r]:void 0},y.filter=y.select=function(e,t,n){var r=[];return t=S(t,n),y.each(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r},y.reject=function(e,t,n){return y.filter(e,y.negate(S(t)),n)},y.every=y.all=function(e,t,n){t=S(t,n);for(var r=!T(e)&&y.keys(e),o=(r||e).length,a=0;o>a;a++){var i=r?r[a]:a;if(!t(e[i],i,e))return!1}return!0},y.some=y.any=function(e,t,n){t=S(t,n);for(var r=!T(e)&&y.keys(e),o=(r||e).length,a=0;o>a;a++){var i=r?r[a]:a;if(t(e[i],i,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return T(e)||(e=y.values(e)),("number"!=typeof n||r)&&(n=0),y.indexOf(e,t,n)>=0},y.invoke=function(e,t){var n=s.call(arguments,2),r=y.isFunction(t);return y.map(e,function(e){var o=r?t:e[t];return null==o?o:o.apply(e,n)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,n){var r,o,a=-1/0,i=-1/0;if(null==t&&null!=e){e=T(e)?e:y.values(e);for(var u=0,l=e.length;l>u;u++)r=e[u],r>a&&(a=r)}else t=S(t,n),y.each(e,function(e,n,r){o=t(e,n,r),(o>i||o===-1/0&&a===-1/0)&&(a=e,i=o)});return a},y.min=function(e,t,n){var r,o,a=1/0,i=1/0;if(null==t&&null!=e){e=T(e)?e:y.values(e);for(var u=0,l=e.length;l>u;u++)r=e[u],a>r&&(a=r)}else t=S(t,n),y.each(e,function(e,n,r){o=t(e,n,r),(i>o||1/0===o&&1/0===a)&&(a=e,i=o)});return a},y.shuffle=function(e){for(var t,n=T(e)?e:y.values(e),r=n.length,o=Array(r),a=0;r>a;a++)t=y.random(0,a),t!==a&&(o[a]=o[t]),o[t]=n[a];return o},y.sample=function(e,t,n){return null==t||n?(T(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,n){return t=S(t,n),y.pluck(y.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var A=function(e){return function(t,n,r){var o={};return n=S(n,r),y.each(t,function(r,a){var i=n(r,a,t);e(o,r,i)}),o}};y.groupBy=A(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=A(function(e,t,n){e[n]=t}),y.countBy=A(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?s.call(e):T(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:T(e)?e.length:y.keys(e).length},y.partition=function(e,t,n){t=S(t,n);var r=[],o=[];return y.each(e,function(e,n,a){(t(e,n,a)?r:o).push(e)}),[r,o]},y.first=y.head=y.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return s.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return s.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var P=function(e,t,n,r){for(var o=[],a=0,i=r||0,u=E(e);u>i;i++){var l=e[i];if(T(l)&&(y.isArray(l)||y.isArguments(l))){t||(l=P(l,t,n));var c=0,s=l.length;for(o.length+=s;s>c;)o[a++]=l[c++]}else n||(o[a++]=l)}return o};y.flatten=function(e,t){return P(e,t,!1)},y.without=function(e){return y.difference(e,s.call(arguments,1))},y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=S(n,r));for(var o=[],a=[],i=0,u=E(e);u>i;i++){var l=e[i],c=n?n(l,i,e):l;t?(i&&a===c||o.push(l),a=c):n?y.contains(a,c)||(a.push(c),o.push(l)):y.contains(o,l)||o.push(l)}return o},y.union=function(){return y.uniq(P(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,r=0,o=E(e);o>r;r++){var a=e[r];if(!y.contains(t,a)){for(var i=1;n>i&&y.contains(arguments[i],a);i++);i===n&&t.push(a)}}return t},y.difference=function(e){var t=P(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,E).length||0,n=Array(t),r=0;t>r;r++)n[r]=y.pluck(e,r);return n},y.object=function(e,t){for(var n={},r=0,o=E(e);o>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(e,t,n,r){n=S(n,r,1);for(var o=n(t),a=0,i=E(e);i>a;){var u=Math.floor((a+i)/2);n(e[u])<o?a=u+1:i=u}return a},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),a=0;r>a;a++,e+=n)o[a]=e;return o};var k=function(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var a=_(e.prototype),i=e.apply(a,o);return y.isObject(i)?i:a};y.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,s.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=s.call(arguments,2),r=function(){return k(e,r,t,this,n.concat(s.call(arguments)))};return r},y.partial=function(e){var t=s.call(arguments,1),n=function(){for(var r=0,o=t.length,a=Array(o),i=0;o>i;i++)a[i]=t[i]===y?arguments[r++]:t[i];for(;r<arguments.length;)a.push(arguments[r++]);return k(e,n,this,this,a)};return n},y.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=y.bind(e[n],e);return e},y.memoize=function(e,t){var n=function(r){var o=n.cache,a=""+(t?t.apply(this,arguments):r);return y.has(o,a)||(o[a]=e.apply(this,arguments)),o[a]};return n.cache={},n},y.delay=function(e,t){var n=s.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,n){var r,o,a,i=null,u=0;n||(n={});var l=function(){u=n.leading===!1?0:y.now(),i=null,a=e.apply(r,o),i||(r=o=null)};return function(){var c=y.now();u||n.leading!==!1||(u=c);var s=t-(c-u);return r=this,o=arguments,0>=s||s>t?(i&&(clearTimeout(i),i=null),u=c,a=e.apply(r,o),i||(r=o=null)):i||n.trailing===!1||(i=setTimeout(l,s)),a}},y.debounce=function(e,t,n){var r,o,a,i,u,l=function(){var c=y.now()-i;t>c&&c>=0?r=setTimeout(l,t-c):(r=null,n||(u=e.apply(a,o),r||(a=o=null)))};return function(){a=this,o=arguments,i=y.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(u=e.apply(a,o),a=o=null),u}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},y.once=y.partial(y.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)y.has(e,n)&&t.push(n);return M&&r(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var n in e)t.push(n);return M&&r(e,t),t},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=e[t[o]];return r},y.mapObject=function(e,t,n){t=S(t,n);for(var r,o=y.keys(e),a=o.length,i={},u=0;a>u;u++)r=o[u],i[r]=t(e[r],r,e);return i},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),o=0;n>o;o++)r[o]=[t[o],e[t[o]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,o=n.length;o>r;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t=[];for(var n in e)y.isFunction(e[n])&&t.push(n);return t.sort()},y.extend=w(y.allKeys),y.extendOwn=y.assign=w(y.keys),y.findKey=function(e,t,n){t=S(t,n);for(var r,o=y.keys(e),a=0,i=o.length;i>a;a++)if(r=o[a],t(e[r],r,e))return r},y.pick=function(e,t,n){var r,o,a={},i=e;if(null==i)return a;y.isFunction(t)?(o=y.allKeys(i),r=b(t,n)):(o=P(arguments,!1,!1,1),r=function(e,t,n){return t in n},i=Object(i));for(var u=0,l=o.length;l>u;u++){var c=o[u],s=i[c];r(s,c,i)&&(a[c]=s)}return a},y.omit=function(e,t,n){if(y.isFunction(t))t=y.negate(t);else{var r=y.map(P(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(r,t)}}return y.pick(e,t,n)},y.defaults=w(y.allKeys,!0),y.create=function(e,t){var n=_(e);return t&&y.extendOwn(n,t),n},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var o=Object(e),a=0;r>a;a++){var i=n[a];if(t[i]!==o[i]||!(i in o))return!1}return!0};var x=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var o=d.call(e);if(o!==d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var i=e.constructor,u=t.constructor;if(i!==u&&!(y.isFunction(i)&&i instanceof i&&y.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===e)return r[l]===t;if(n.push(e),r.push(t),a){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!x(e[l],t[l],n,r))return!1}else{var c,s=y.keys(e);if(l=s.length,y.keys(t).length!==l)return!1;for(;l--;)if(c=s[l],!y.has(t,c)||!x(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};y.isEqual=function(e,t){return x(e,t)},y.isEmpty=function(e){return null==e||(T(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=m||function(e){return"[object Array]"===d.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&p.call(e,t)},y.noConflict=function(){return o._=a,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=C,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=b(t,n,1);for(var o=0;e>o;o++)r[o]=t(o);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=y.invert(O),L=function(e){var t=function(t){return e[t]},n="(?:"+y.keys(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}};y.escape=L(O),y.unescape=L(N),y.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),y.isFunction(r)?r.call(e):r};var D=0;y.uniqueId=function(e){var t=++D+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,j=function(e){return"\\"+R[e]};y.template=function(e,t,n){!t&&n&&(t=n),t=y.defaults({},t,y.templateSettings);var r=RegExp([(t.escape||B).source,(t.interpolate||B).source,(t.evaluate||B).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(r,function(t,n,r,i,u){return a+=e.slice(o,u).replace(q,j),o=u+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var i=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var u=function(e){return i.call(this,e,y)},l=t.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u},y.chain=function(e){var t=y(e);return t._chain=!0,t};var F=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),F(this,n.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];y.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],F(this,n)}}),y.each(["concat","join","slice"],function(e){var t=i[e];y.prototype[e]=function(){return F(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(e){return e}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(e,t,n,r,o,a){function i(){a.$broadcast("gettextLanguageChanged")}var u,l="$$noContext",c='<span id="test" title="test" class="tested">test</span>',s=angular.element("<span>"+c+"</span>").html()!==c,d=function(e){return u.debug&&u.currentLanguage!==u.baseLanguage?u.debugPrefix+e:e},p=function(e){return u.showTranslatedMarkers?u.translatedMarkerPrefix+e+u.translatedMarkerSuffix:e};return u={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:r("strings"),setCurrentLanguage:function(e){this.currentLanguage=e,i()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(t,n){this.strings[t]||(this.strings[t]={});var r=e(t,1);for(var o in n){var a=n[o];if(s&&(o=angular.element("<span>"+o+"</span>").html()),angular.isString(a)||angular.isArray(a)){var u={};u[l]=a,a=u}this.strings[t][o]||(this.strings[t][o]={});for(var c in a){var d=a[c];angular.isArray(d)?this.strings[t][o][c]=d:(this.strings[t][o][c]=[],this.strings[t][o][c][r]=d)}}i()},getStringFormFor:function(t,n,r,o){if(!t)return null;var a=this.strings[t]||{},i=a[n]||{},u=i[o||l]||[];return u[e(t,r)]},getString:function(e,n,r){var a=t(this.currentLanguage);return e=this.getStringFormFor(this.currentLanguage,e,1,r)||this.getStringFormFor(a,e,1,r)||d(e),e=n?o(e)(n):e,p(e)},getPlural:function(e,n,r,a,i){var u=t(this.currentLanguage);return n=this.getStringFormFor(this.currentLanguage,n,e,i)||this.getStringFormFor(u,n,e,i)||d(1===e?n:r),a&&(a.$count=e,n=o(n)(a)),p(n)},loadRemote:function(e){return n({method:"GET",url:e,cache:u.cache}).then(function(e){var t=e.data;for(var n in t)u.setStrings(n,t[n]);return e})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window","gettextUtil",function(e,t,n,r,o,a){function i(e){return a.lcFirst(e.replace(c,""))}function u(e,t,n){var r=Object.keys(t).filter(function(e){return a.startsWith(e,c)&&e!==c});if(!r.length)return null;var o=e.$new(),u=[];return r.forEach(function(r){var a=e.$watch(t[r],function(e){var t=i(r);o[t]=e,n(o)});u.push(a)}),e.$on("$destroy",function(){u.forEach(function(e){e()}),o.$destroy()}),o}var l=parseInt((/msie (\d+)/i.exec(o.navigator.userAgent)||[])[1],10),c="translateParams";return{restrict:"AE",terminal:!0,compile:function(o,i){a.assert(!i.translatePlural||i.translateN,"translate-n","translate-plural"),a.assert(!i.translateN||i.translatePlural,"translate-plural","translate-n");var c=a.trim(o.html()),s=i.translatePlural,d=i.translateContext;return l<=8&&"<!--IE fix-->"===c.slice(-13)&&(c=c.slice(0,-13)),{post:function(o,i,l){function p(t){t=t||null;var u;s?(o=f||(f=o.$new()),o.$count=m(o),u=e.getPlural(o.$count,c,s,null,d)):u=e.getString(c,null,d);var l=i.contents();if(l||u){if(u===a.trim(l.html()))return void(g&&r(l)(o));var p=angular.element("<span>"+u+"</span>");r(p.contents())(t||o);var h=p.contents();n.enter(h,i),n.leave(l)}}var m=t(l.translateN),f=null,g=!0,h=u(o,l,p);p(h),g=!1,l.translateN&&o.$watch(l.translateN,function(){p(h)}),o.$on("gettextLanguageChanged",function(){p(h)})}}}}}]),angular.module("gettext").factory("gettextFallbackLanguage",function(){var e={},t=/([^_]+)_[^_]+$/;return function(n){if(e[n])return e[n];var r=t.exec(n);return r?(e[n]=r[1],r[1]):null}}),angular.module("gettext").filter("translate",["gettextCatalog",function(e){function t(t,n){return e.getString(t,null,n)}return t.$stateful=!0,t}]),angular.module("gettext").factory("gettextPlurals",function(){function e(e){return t[e]||(t[e]=e.split(/\-|_/).shift()),t[e]}var t={pt_BR:"pt_BR","pt-BR":"pt_BR"};return function(t,n){switch(e(t)){case"ay":
case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return n%10!=1||n%100==11?1:0;case"jv":return 0!=n?1:0;case"mk":return 1==n||n%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return n>1?1:0;case"lv":return n%10==1&&n%100!=11?0:0!=n?1:2;case"lt":return n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;case"mnk":return 0==n?0:1==n?1:2;case"ro":return 1==n?0:0==n||n%100>0&&n%100<20?1:2;case"pl":return 1==n?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2;case"cs":case"sk":return 1==n?0:n>=2&&n<=4?1:2;case"sl":return n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0;case"mt":return 1==n?0:0==n||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3;case"gd":return 1==n||11==n?0:2==n||12==n?1:n>2&&n<20?2:3;case"cy":return 1==n?0:2==n?1:8!=n&&11!=n?2:3;case"kw":return 1==n?0:2==n?1:3==n?2:3;case"ga":return 1==n?0:2==n?1:n<7?2:n<11?3:4;case"ar":return 0==n?0:1==n?1:2==n?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5;default:return 1!=n?1:0}}}),angular.module("gettext").factory("gettextUtil",function(){function e(e,t,n){if(!e)throw new Error("You should add a "+t+" attribute whenever you add a "+n+" attribute.")}function t(e,t){return 0===e.indexOf(t)}function n(e){var t=e.charAt(0).toLowerCase();return t+e.substr(1)}var r=function(){return String.prototype.trim?function(e){return"string"==typeof e?e.trim():e}:function(e){return"string"==typeof e?e.replace(/^\s*/,"").replace(/\s*$/,""):e}}();return{trim:r,assert:e,startsWith:t,lcFirst:n}});var duScrollDefaultEasing=function(e){"use strict";return.5>e?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2};angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",duScrollDefaultEasing).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active"),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function(e,t,n,r,o,a,i,u){"use strict";var l={},c=function(e){return"undefined"!=typeof HTMLDocument&&e instanceof HTMLDocument||e.nodeType&&e.nodeType===e.DOCUMENT_NODE},s=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e.nodeType&&e.nodeType===e.ELEMENT_NODE},d=function(e){return s(e)||c(e)?e:e[0]};l.duScrollTo=function(t,n,r,o){var a;if(angular.isElement(t)?a=this.duScrollToElement:angular.isDefined(r)&&(a=this.duScrollToAnimated),a)return a.apply(this,arguments);var i=d(this);return c(i)?e.scrollTo(t,n):(i.scrollLeft=t,void(i.scrollTop=n))};var p,m;l.duScrollToAnimated=function(e,a,i,l){i&&!l&&(l=o);var c=this.duScrollLeft(),s=this.duScrollTop(),d=Math.round(e-c),f=Math.round(a-s),g=null,h=0,v=this,y=function(e){(!e||h&&e.which>0)&&(u&&v.unbind(u,y),n(p),m.reject(),p=null)};if(p&&y(),m=t.defer(),0===i||!d&&!f)return 0===i&&v.duScrollTo(e,a),m.resolve(),m.promise;var b=function(e){null===g&&(g=e),h=e-g;var t=h>=i?1:l(h/i);v.scrollTo(c+Math.ceil(d*t),s+Math.ceil(f*t)),1>t?p=r(b):(u&&v.unbind(u,y),p=null,m.resolve())};return v.duScrollTo(c,s),u&&v.bind(u,y),p=r(b),m.promise},l.duScrollToElement=function(e,t,n,r){var o=d(this);(!angular.isNumber(t)||isNaN(t))&&(t=i);var a=this.duScrollTop()+d(e).getBoundingClientRect().top-t;return s(o)&&(a-=o.getBoundingClientRect().top),this.duScrollTo(0,a,n,r)},l.duScrollLeft=function(t,n,r){if(angular.isNumber(t))return this.duScrollTo(t,this.duScrollTop(),n,r);var o=d(this);return c(o)?e.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:o.scrollLeft},l.duScrollTop=function(t,n,r){if(angular.isNumber(t))return this.duScrollTo(this.duScrollLeft(),t,n,r);var o=d(this);return c(o)?e.scrollY||document.documentElement.scrollTop||document.body.scrollTop:o.scrollTop},l.duScrollToElementAnimated=function(e,t,n,r){return this.duScrollToElement(e,t,n||a,r)},l.duScrollTopAnimated=function(e,t,n){return this.duScrollTop(e,t||a,n)},l.duScrollLeftAnimated=function(e,t,n){return this.duScrollLeft(e,t||a,n)},angular.forEach(l,function(e,t){angular.element.prototype[t]=e;var n=t.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[n])&&(angular.element.prototype[n]=e)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(e){"use strict";var t=["webkit","moz","o","ms"];return function(n,r){if(e[n])return e[n];for(var o,a=n.substr(0,1).toUpperCase()+n.substr(1),i=0;i<t.length;i++)if(o=t[i]+a,e[o])return e[o];return r}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(e,t){"use strict";var n=0,r=function(e,r){var o=(new Date).getTime(),a=Math.max(0,16-(o-n)),i=t(function(){e(o+a)},a);return n=o+a,i};return e("requestAnimationFrame",r)}]).factory("cancelAnimation",["polyfill","$timeout",function(e,t){"use strict";var n=function(e){t.cancel(e)};return e("cancelAnimationFrame",n)}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollBottomSpy","duScrollActiveClass",function(e,t,n,r,o,a,i,u,l){"use strict";var c=function(o){var c=!1,s=!1,d=function(){s=!1;var t,i=o.container,c=i[0],d=0;"undefined"!=typeof HTMLElement&&c instanceof HTMLElement||c.nodeType&&c.nodeType===c.ELEMENT_NODE?(d=c.getBoundingClientRect().top,t=Math.round(c.scrollTop+c.clientHeight)>=c.scrollHeight):t=Math.round(n.pageYOffset+n.innerHeight)>=r[0].body.scrollHeight;var p,m,f,g,h,v,y=u&&t?"bottom":"top";for(g=o.spies,m=o.currentlyActive,f=void 0,p=0;p<g.length;p++)h=g[p],v=h.getTargetPosition(),v&&(u&&t||v.top+h.offset-d<20&&(a||-1*v.top+d)<v.height)&&(!f||f[y]<v[y])&&(f={spy:h},f[y]=v[y]);f&&(f=f.spy),m===f||a&&!f||(m&&(m.$element.removeClass(l),e.$broadcast("duScrollspy:becameInactive",m.$element,angular.element(m.getTargetElement()))),f&&(f.$element.addClass(l),e.$broadcast("duScrollspy:becameActive",f.$element,angular.element(f.getTargetElement()))),o.currentlyActive=f)};return i?function(){c?s=!0:(d(),c=t(function(){c=!1,s&&d()},i,!1))}:d},s={},d=function(e){var t=e.$id,n={spies:[]};return n.handler=c(n),s[t]=n,e.$on("$destroy",function(){p(e)}),t},p=function(e){var t=e.$id,n=s[t],r=n.container;r&&r.off("scroll",n.handler),delete s[t]},m=d(e),f=function(e){return s[e.$id]?s[e.$id]:e.$parent?f(e.$parent):s[m]},g=function(e){var t,n,r=e.$scope;if(r)return f(r);for(n in s)if(t=s[n],-1!==t.spies.indexOf(e))return t},h=function(e){for(;e.parentNode;)if(e=e.parentNode,e===document)return!0;return!1},v=function(e){var t=g(e);t&&(t.spies.push(e),t.container&&h(t.container)||(t.container&&t.container.off("scroll",t.handler),t.container=o.getContainer(e.$scope),t.container.on("scroll",t.handler).triggerHandler("scroll")))},y=function(e){var t=g(e);e===t.currentlyActive&&(t.currentlyActive=null);var n=t.spies.indexOf(e);-1!==n&&t.spies.splice(n,1),e.$element=null};return{addSpy:v,removeSpy:y,createContext:d,destroyContext:p,getContextForScope:f}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(e){"use strict";var t={},n=function(e,n){var r=e.$id;return t[r]=n,r},r=function(e){return t[e.$id]?e.$id:e.$parent?r(e.$parent):void 0},o=function(n){var o=r(n);return o?t[o]:e},a=function(e){var n=r(e);n&&delete t[n]};return{getContainerId:r,getContainer:o,setContainer:n,removeContainer:a}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(e,t,n){"use strict";return{link:function(r,o,a){o.on("click",function(o){if(a.href&&-1!==a.href.indexOf("#")||""!==a.duSmoothScroll){var i=a.href?a.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):a.duSmoothScroll,u=document.getElementById(i)||document.getElementsByName(i)[0];if(u&&u.getBoundingClientRect){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault();var l=a.offset?parseInt(a.offset,10):t,c=a.duration?parseInt(a.duration,10):e,s=n.getContainer(r);s.duScrollToElement(angular.element(u),isNaN(l)?0:l,isNaN(c)?0:c)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,r){return{pre:function(t,n,r,o){e.createContext(t)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,r){return{pre:function(t,n,r,o){r.$observe("duScrollContainer",function(r){angular.isString(r)&&(r=document.getElementById(r)),r=angular.isElement(r)?angular.element(r):n,e.setContainer(t,r),t.$on("$destroy",function(){e.removeContainer(t)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(e,t,n,r){"use strict";var o=function(e,t,n,r){angular.isElement(e)?this.target=e:angular.isString(e)&&(this.targetId=e),this.$scope=t,this.$element=n,this.offset=r};return o.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},o.prototype.getTargetPosition=function(){var e=this.getTargetElement();return e?e.getBoundingClientRect():void 0},o.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(a,i,u){var l,c=u.ngHref||u.href;if(c&&-1!==c.indexOf("#")?l=c.replace(/.*(?=#[^\s]+$)/,"").substring(1):u.duScrollspy?l=u.duScrollspy:u.duSmoothScroll&&(l=u.duSmoothScroll),l){var s=n(function(){var n=new o(l,a,i,(-(u.offset?parseInt(u.offset,10):t)));e.addSpy(n),a.$on("$locationChangeSuccess",n.flushTargetCache.bind(n));var c=r.$on("$stateChangeSuccess",n.flushTargetCache.bind(n));a.$on("$destroy",function(){e.removeSpy(n),c()})},0,!1);a.$on("$destroy",function(){n.cancel(s)})}}}}]),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var t=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(t,n,r,o,a,i){function u(){r.cancel(c),i.complete(),d=0,s=0}function l(t){var r,o=n.get("$http"),a=e.defaults;!t.cache&&!a.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(r=angular.isObject(t.cache)?t.cache:angular.isObject(a.cache)?a.cache:o);var i=void 0!==r&&void 0!==r.get(t.url);return void 0!==t.cached&&i!==t.cached?t.cached:(t.cached=i,i)}var c,s=0,d=0,p=i.latencyThreshold;return{request:function(e){return e.ignoreLoadingBar||l(e)||(o.$broadcast("cfpLoadingBar:loading",{url:e.url}),0===s&&(c=r(function(){i.start()},p)),s++,i.set(d/s)),e},response:function(e){return e&&e.config?(e.config.ignoreLoadingBar||l(e.config)||(d++,o.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),d>=s?u():i.set(d/s)),e):(a.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e)},responseError:function(e){return e&&e.config?(e.config.ignoreLoadingBar||l(e.config)||(d++,o.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),d>=s?u():i.set(d/s)),t.reject(e)):(a.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t.reject(e))}}}];e.interceptors.push(t)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,t,n,r){function o(){if(s||(s=e.get("$animate")),n.cancel(p),!v){var o=t[0],i=o.querySelector?o.querySelector(m):t.find(m)[0];i||(i=o.getElementsByTagName("body")[0]);var u=angular.element(i),l=i.lastChild&&angular.element(i.lastChild);r.$broadcast("cfpLoadingBar:started"),v=!0,w&&s.enter(f,u,l),S&&s.enter(h,u,f),a(_)}}function a(e){if(v){var t=100*e+"%";g.css("width",t),y=e,b&&(n.cancel(d),d=n(function(){i()},250))}}function i(){if(!(u()>=1)){var e=0,t=u();e=t>=0&&t<.25?(3*Math.random()+3)/100:t>=.25&&t<.65?3*Math.random()/100:t>=.65&&t<.9?2*Math.random()/100:t>=.9&&t<.99?.005:0;var n=u()+e;a(n)}}function u(){return y}function l(){y=0,v=!1}function c(){s||(s=e.get("$animate")),r.$broadcast("cfpLoadingBar:completed"),a(1),n.cancel(p),p=n(function(){var e=s.leave(f,l);e&&e.then&&e.then(l),s.leave(h)},500)}var s,d,p,m=this.parentSelector,f=angular.element(this.loadingBarTemplate),g=f.find("div").eq(0),h=angular.element(this.spinnerTemplate),v=!1,y=0,b=this.autoIncrement,S=this.includeSpinner,w=this.includeBar,_=this.startSize;return{start:o,set:a,status:u,inc:i,complete:c,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),function(e){"use strict";angular.module("tmh.dynamicLocale",[]).provider("tmhDynamicLocale",function(){function e(e,t,n,r){var o=document.createElement("script"),a=document.getElementsByTagName("body")[0],i=!1;o.type="text/javascript",o.readyState?o.onreadystatechange=function(){"complete"!==o.readyState&&"loaded"!==o.readyState||(o.onreadystatechange=null,r(function(){i||(i=!0,a.removeChild(o),t())},30,!1))}:(o.onload=function(){i||(i=!0,a.removeChild(o),t())},o.onerror=function(){i||(i=!0,a.removeChild(o),n())}),o.src=e,o.async=!1,a.appendChild(o)}function t(t,n,a,i,c,s,d){function p(e,t){o===a&&(angular.forEach(e,function(n,r){t[r]?angular.isArray(t[r])&&(e[r].length=t[r].length):delete e[r]}),angular.forEach(t,function(n,r){angular.isArray(t[r])||angular.isObject(t[r])?(e[r]||(e[r]=angular.isArray(t[r])?[]:{}),p(e[r],t[r])):e[r]=t[r]}))}if(l[a])return l[a];var m,f=c.defer();return a===o?f.resolve(n):(m=s.get(a))?(o=a,i.$evalAsync(function(){p(n,m),i.$broadcast("$localeChangeSuccess",a,n),r.put(u,a),f.resolve(n)})):(o=a,l[a]=f.promise,e(t,function(){var e=angular.injector(["ngLocale"]),t=e.get("$locale");p(n,t),s.put(a,t),delete l[a],i.$apply(function(){i.$broadcast("$localeChangeSuccess",a,n),r.put(u,a),f.resolve(n)})},function(){delete l[a],i.$apply(function(){i.$broadcast("$localeChangeError",a),f.reject(a)})},d)),f.promise}var n,r,o,a="angular/i18n/angular-locale_{{locale}}.js",i="tmhDynamicLocaleStorageCache",u="tmhDynamicLocale.locale",l={};this.localeLocationPattern=function(e){return e?(a=e,this):a},this.useStorage=function(e){i=e},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(e){n=e},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(e,o,l,c,s,d,p){var m=l(a);return r=o.get(i),e.$evalAsync(function(){var o;(o=r.get(u)||n)&&t(m({locale:o}),c,o,e,s,d,p)}),{set:function(n){return t(m({locale:n}),c,n,e,s,d,p)}}}]}).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(e){return e("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop])}(window),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.alert","ui.bootstrap.dropdown","ui.bootstrap.multiMap","ui.bootstrap.position","ui.bootstrap.modal","ui.bootstrap.stackedMap","ui.bootstrap.popover","ui.bootstrap.tooltip"]),angular.module("ui.bootstrap.tpls",["uib/template/alert/alert.html","uib/template/modal/window.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html"]),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(e,t,n,r,o){e.closeable=!!n.close,t.addClass("alert"),n.$set("role","alert"),e.closeable&&t.addClass("alert-dismissible");var a=angular.isDefined(n.dismissOnTimeout)?r(n.dismissOnTimeout)(e.$parent):null;a&&o(function(){e.close()},parseInt(a,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function(e,t,n){var r=null,o=n.createNew();this.isOnlyOpen=function(e,t){var n=o.get(t);if(n){var r=n.reduce(function(t,n){return n.scope===e?n:t},{});if(r)return 1===n.length}return!1},this.open=function(t,n,i){if(r||e.on("click",a),r&&r!==t&&(r.isOpen=!1),r=t,i){var u=o.get(i);if(u){var l=u.map(function(e){return e.scope});-1===l.indexOf(t)&&o.put(i,{scope:t})}else o.put(i,{scope:t})}},this.close=function(t,n,i){if(r===t&&(e.off("click",a),e.off("keydown",this.keybindFilter),r=null),i){var u=o.get(i);if(u){var l=u.reduce(function(e,n){return n.scope===t?n:e},{});l&&o.remove(i,l)}}};var a=function(e){if(r&&r.isOpen&&!(e&&"disabled"===r.getAutoClose()||e&&3===e.which)){var n=r.getToggleElement();if(!(e&&n&&n[0].contains(e.target))){var o=r.getDropdownElement();e&&"outsideClick"===r.getAutoClose()&&o&&o[0].contains(e.target)||(r.focusToggleElement(),r.isOpen=!1,t.$$phase||r.$apply())}}};this.keybindFilter=function(e){if(r){var t=r.getDropdownElement(),n=r.getToggleElement(),o=t&&t[0].contains(e.target),i=n&&n[0].contains(e.target);27===e.which?(e.stopPropagation(),r.focusToggleElement(),a()):r.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&r.isOpen&&(o||i)&&(e.preventDefault(),e.stopPropagation(),r.focusDropdownEntry(e.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,r,o,a,i,u,l,c,s){function d(){t.append(f.dropdownMenu)}var p,m,f=this,g=e.$new(),h=o.appendToOpenClass,v=o.openClass,y=angular.noop,b=n.onToggle?r(n.onToggle):angular.noop,S=!1,w=l.find("body");t.addClass("dropdown"),this.init=function(){n.isOpen&&(m=r(n.isOpen),y=m.assign,e.$watch(m,function(e){g.isOpen=!!e})),S=angular.isDefined(n.keyboardNav)},this.toggle=function(e){return g.isOpen=arguments.length?!!e:!g.isOpen,angular.isFunction(y)&&y(g,g.isOpen),g.isOpen},this.isOpen=function(){return g.isOpen},g.getToggleElement=function(){return f.toggleElement},g.getAutoClose=function(){return n.autoClose||"always"},g.getElement=function(){return t},g.isKeynavEnabled=function(){return S},g.focusDropdownEntry=function(e){var n=f.dropdownMenu?angular.element(f.dropdownMenu).find("a"):t.find("ul").eq(0).find("a");switch(e){case 40:f.selectedOption=angular.isNumber(f.selectedOption)?f.selectedOption===n.length-1?f.selectedOption:f.selectedOption+1:0;break;case 38:f.selectedOption=angular.isNumber(f.selectedOption)?0===f.selectedOption?0:f.selectedOption-1:n.length-1}n[f.selectedOption].focus()},g.getDropdownElement=function(){return f.dropdownMenu},g.focusToggleElement=function(){f.toggleElement&&f.toggleElement[0].focus()},g.$watch("isOpen",function(o,m){var S=null,_=!1;if(angular.isDefined(n.dropdownAppendTo)){var C=r(n.dropdownAppendTo)(g);C&&(S=angular.element(C))}if(angular.isDefined(n.dropdownAppendToBody)){var $=r(n.dropdownAppendToBody)(g);$!==!1&&(_=!0)}if(_&&!S&&(S=w),S&&f.dropdownMenu&&(o?(S.append(f.dropdownMenu),t.on("$destroy",d)):(t.off("$destroy",d),d())),S&&f.dropdownMenu){var E,T,A,P=u.positionElements(t,f.dropdownMenu,"bottom-left",!0),k=0;if(E={top:P.top+"px",display:o?"block":"none"},T=f.dropdownMenu.hasClass("dropdown-menu-right"),T?(E.left="auto",A=u.scrollbarPadding(S),A.heightOverflow&&A.scrollbarWidth&&(k=A.scrollbarWidth),E.right=window.innerWidth-k-(P.left+t.prop("offsetWidth"))+"px"):(E.left=P.left+"px",E.right="auto"),!_){var M=u.offset(S);E.top=P.top-M.top+"px",T?E.right=window.innerWidth-(P.left-M.left+t.prop("offsetWidth"))+"px":E.left=P.left-M.left+"px"}f.dropdownMenu.css(E)}var I=S?S:t,x=S?h:v,O=I.hasClass(x),N=a.isOnlyOpen(e,S);if(O===!o){var L;L=S?N?"removeClass":"addClass":o?"addClass":"removeClass",i[L](I,x).then(function(){angular.isDefined(o)&&o!==m&&b(e,{open:!!o})})}if(o)f.dropdownMenuTemplateUrl?s(f.dropdownMenuTemplateUrl).then(function(e){p=g.$new(),c(e.trim())(p,function(e){var t=e;f.dropdownMenu.replaceWith(t),f.dropdownMenu=t,l.on("keydown",a.keybindFilter)})}):l.on("keydown",a.keybindFilter),g.focusToggleElement(),a.open(g,t,S);else{if(a.close(g,t,S),f.dropdownMenuTemplateUrl){p&&p.$destroy();var D=angular.element('<ul class="dropdown-menu"></ul>');f.dropdownMenu.replaceWith(D),f.dropdownMenu=D}f.selectedOption=null}angular.isFunction(y)&&y(e,o)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,r){r.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,r){if(r&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var o=n.templateUrl;o&&(r.dropdownMenuTemplateUrl=o),r.dropdownMenu||(r.dropdownMenu=t)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,t,n,r){if(r){t.addClass("dropdown-toggle"),r.toggleElement=t;var o=function(o){o.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){r.toggle()})};t.on("click",o),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(r.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.off("click",o)})}}}}),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var e={};return{entries:function(){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})},get:function(t){return e[t]},hasKey:function(t){return!!e[t]},keys:function(){return Object.keys(e)},put:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},remove:function(t,n){var r=e[t];if(r){var o=r.indexOf(n);-1!==o&&r.splice(o,1),r.length||delete e[t]}}}}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(e,t){var n,r,o={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},a={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},i=/(HTML|BODY)/;return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(n){function r(e){return"static"===(t.getComputedStyle(e).position||"static")}n=this.getRawNode(n);for(var o=n.offsetParent||e[0].documentElement;o&&o!==e[0].documentElement&&r(o);)o=o.offsetParent;return o||e[0].documentElement},scrollbarWidth:function(o){if(o){if(angular.isUndefined(r)){var a=e.find("body");a.addClass("uib-position-body-scrollbar-measure"),r=t.innerWidth-a[0].clientWidth,r=isFinite(r)?r:0,a.removeClass("uib-position-body-scrollbar-measure")}return r}if(angular.isUndefined(n)){var i=angular.element('<div class="uib-position-scrollbar-measure"></div>');e.find("body").append(i),n=i[0].offsetWidth-i[0].clientWidth,n=isFinite(n)?n:0,i.remove()}return n},scrollbarPadding:function(e){e=this.getRawNode(e);var n=t.getComputedStyle(e),r=this.parseStyle(n.paddingRight),o=this.parseStyle(n.paddingBottom),a=this.scrollParent(e,!1,!0),u=this.scrollbarWidth(i.test(a.tagName));return{scrollbarWidth:u,widthOverflow:a.scrollWidth>a.clientWidth,right:r+u,originalRight:r,heightOverflow:a.scrollHeight>a.clientHeight,bottom:o+u,originalBottom:o}},isScrollable:function(e,n){e=this.getRawNode(e);var r=n?o.hidden:o.normal,a=t.getComputedStyle(e);return r.test(a.overflow+a.overflowY+a.overflowX)},scrollParent:function(n,r,a){n=this.getRawNode(n);var i=r?o.hidden:o.normal,u=e[0].documentElement,l=t.getComputedStyle(n);if(a&&i.test(l.overflow+l.overflowY+l.overflowX))return n;var c="absolute"===l.position,s=n.parentElement||u;if(s===u||"fixed"===l.position)return u;for(;s.parentElement&&s!==u;){var d=t.getComputedStyle(s);if(c&&"static"!==d.position&&(c=!1),!c&&i.test(d.overflow+d.overflowY+d.overflowX))break;s=s.parentElement}return s},position:function(n,r){n=this.getRawNode(n);var o=this.offset(n);if(r){var a=t.getComputedStyle(n);o.top-=this.parseStyle(a.marginTop),o.left-=this.parseStyle(a.marginLeft)}var i=this.offsetParent(n),u={top:0,left:0};return i!==e[0].documentElement&&(u=this.offset(i),u.top+=i.clientTop-i.scrollTop,u.left+=i.clientLeft-i.scrollLeft),{width:Math.round(angular.isNumber(o.width)?o.width:n.offsetWidth),height:Math.round(angular.isNumber(o.height)?o.height:n.offsetHeight),top:Math.round(o.top-u.top),left:Math.round(o.left-u.left)}},offset:function(n){n=this.getRawNode(n);var r=n.getBoundingClientRect();return{width:Math.round(angular.isNumber(r.width)?r.width:n.offsetWidth),height:Math.round(angular.isNumber(r.height)?r.height:n.offsetHeight),top:Math.round(r.top+(t.pageYOffset||e[0].documentElement.scrollTop)),left:Math.round(r.left+(t.pageXOffset||e[0].documentElement.scrollLeft))}},viewportOffset:function(n,r,o){n=this.getRawNode(n),o=o!==!1;var a=n.getBoundingClientRect(),i={top:0,left:0,bottom:0,right:0},u=r?e[0].documentElement:this.scrollParent(n),l=u.getBoundingClientRect();if(i.top=l.top+u.clientTop,i.left=l.left+u.clientLeft,u===e[0].documentElement&&(i.top+=t.pageYOffset,i.left+=t.pageXOffset),i.bottom=i.top+u.clientHeight,i.right=i.left+u.clientWidth,o){var c=t.getComputedStyle(u);i.top+=this.parseStyle(c.paddingTop),i.bottom-=this.parseStyle(c.paddingBottom),i.left+=this.parseStyle(c.paddingLeft),i.right-=this.parseStyle(c.paddingRight)}return{top:Math.round(a.top-i.top),bottom:Math.round(i.bottom-a.bottom),left:Math.round(a.left-i.left),right:Math.round(i.right-a.right)}},parsePlacement:function(e){var t=a.auto.test(e);return t&&(e=e.replace(a.auto,"")),e=e.split("-"),e[0]=e[0]||"top",a.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",a.secondary.test(e[1])||(e[1]="center"),e[2]=!!t,e},positionElements:function(e,n,r,o){e=this.getRawNode(e),n=this.getRawNode(n);var i=angular.isDefined(n.offsetWidth)?n.offsetWidth:n.prop("offsetWidth"),u=angular.isDefined(n.offsetHeight)?n.offsetHeight:n.prop("offsetHeight");r=this.parsePlacement(r);var l=o?this.offset(e):this.position(e),c={top:0,left:0,placement:""};if(r[2]){var s=this.viewportOffset(e,o),d=t.getComputedStyle(n),p={width:i+Math.round(Math.abs(this.parseStyle(d.marginLeft)+this.parseStyle(d.marginRight))),height:u+Math.round(Math.abs(this.parseStyle(d.marginTop)+this.parseStyle(d.marginBottom)))};if(r[0]="top"===r[0]&&p.height>s.top&&p.height<=s.bottom?"bottom":"bottom"===r[0]&&p.height>s.bottom&&p.height<=s.top?"top":"left"===r[0]&&p.width>s.left&&p.width<=s.right?"right":"right"===r[0]&&p.width>s.right&&p.width<=s.left?"left":r[0],r[1]="top"===r[1]&&p.height-l.height>s.bottom&&p.height-l.height<=s.top?"bottom":"bottom"===r[1]&&p.height-l.height>s.top&&p.height-l.height<=s.bottom?"top":"left"===r[1]&&p.width-l.width>s.right&&p.width-l.width<=s.left?"right":"right"===r[1]&&p.width-l.width>s.left&&p.width-l.width<=s.right?"left":r[1],"center"===r[1])if(a.vertical.test(r[0])){var m=l.width/2-i/2;s.left+m<0&&p.width-l.width<=s.right?r[1]="left":s.right+m<0&&p.width-l.width<=s.left&&(r[1]="right")}else{var f=l.height/2-p.height/2;s.top+f<0&&p.height-l.height<=s.bottom?r[1]="top":s.bottom+f<0&&p.height-l.height<=s.top&&(r[1]="bottom")}}switch(r[0]){case"top":c.top=l.top-u;break;case"bottom":c.top=l.top+l.height;break;case"left":c.left=l.left-i;break;case"right":c.left=l.left+l.width}switch(r[1]){case"top":c.top=l.top;break;case"bottom":c.top=l.top+l.height-u;break;case"left":c.left=l.left;break;case"right":c.left=l.left+l.width-i;break;case"center":a.vertical.test(r[0])?c.left=l.left+l.width/2-i/2:c.top=l.top+l.height/2-u/2}return c.top=Math.round(c.top),c.left=Math.round(c.left),c.placement="center"===r[1]?r[0]:r[0]+"-"+r[1],c},adjustTop:function(e,t,n,r){return-1!==e.indexOf("top")&&n!==r?{top:t.top-r+"px"}:void 0},positionArrow:function(e,n){e=this.getRawNode(e);var r=e.querySelector(".tooltip-inner, .popover-inner");if(r){var o=angular.element(r).hasClass("tooltip-inner"),i=e.querySelector(o?".tooltip-arrow":".arrow");if(i){var u={top:"",bottom:"",left:"",right:""};if(n=this.parsePlacement(n),"center"===n[1])return void angular.element(i).css(u);var l="border-"+n[0]+"-width",c=t.getComputedStyle(i)[l],s="border-";s+=a.vertical.test(n[0])?n[0]+"-"+n[1]:n[1]+"-"+n[0],s+="-radius";var d=t.getComputedStyle(o?r:e)[s];switch(n[0]){case"top":u.bottom=o?"0":"-"+c;break;case"bottom":u.top=o?"0":"-"+c;break;case"left":u.right=o?"0":"-"+c;break;case"right":u.left=o?"0":"-"+c}u[n[1]]=d,angular.element(i).css(u)}}}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(t,n){var r=e.resolver?t.get(e.resolver):null;return{resolve:function(e,o,a,i){if(r)return r.resolve(e,o,a,i);var u=[];return angular.forEach(e,function(e){u.push(angular.isFunction(e)||angular.isArray(e)?n.resolve(t.invoke(e)):angular.isString(e)?n.resolve(t.get(e)):n.resolve(e))}),n.all(u).then(function(t){var n={},r=0;return angular.forEach(e,function(e,o){n[o]=t[r++]}),n})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(e,t,n){function r(t,r,o){o.modalInClass&&(e.addClass(r,o.modalInClass),t.$on(n.NOW_CLOSING_EVENT,function(n,a){var i=a();t.modalOptions.animation?e.removeClass(r,o.modalInClass).then(i):i()}))}return{restrict:"A",compile:function(e,t){return e.addClass(t.backdropClass),r}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(e,t,n,r){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/modal/window.html"},link:function(o,a,i){a.addClass(i.windowTopClass||""),o.size=i.size,o.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},a.on("click",o.close),o.$isRendered=!0;var u=t.defer();o.$$postDigest(function(){u.resolve()}),u.promise.then(function(){var u=null;i.modalInClass&&(u=n(a,{addClass:i.modalInClass}).start(),o.$on(e.NOW_CLOSING_EVENT,function(e,t){var r=t();n(a,{removeClass:i.modalInClass}).start().then(r)})),t.when(u).then(function(){var t=e.getTop();if(t&&e.modalRendered(t.key),!r[0].activeElement||!a[0].contains(r[0].activeElement)){var n=a[0].querySelector("[autofocus]");n?n.focus():a[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){
return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(e){return{link:function(t,n,r,o,a){a(t.$parent,function(t){n.empty(),e.enter(t,n)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(e,t,n,r,o,a,i,u,l){function c(e){var t="-";return e.replace(M,function(e,n){return(n?t:"")+e.toLowerCase()})}function s(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function d(){for(var e=-1,t=C.keys(),n=0;n<t.length;n++)C.get(t[n]).value.backdrop&&(e=n);return e>-1&&T>e&&(e=T),e}function p(e,t){var n=C.get(e).value,r=n.appendTo;C.remove(e),A=C.top(),A&&(T=parseInt(A.value.modalDomEl.attr("index"),10)),g(n.modalDomEl,n.modalScope,function(){var t=n.openedClass||_;$.remove(t,e);var o=$.hasKey(t);r.toggleClass(t,o),!o&&w&&w.heightOverflow&&w.scrollbarWidth&&(r.css(w.originalRight?{paddingRight:w.originalRight+"px"}:{paddingRight:""}),w=null),m(!0)},n.closedDeferred),f(),t&&t.focus?t.focus():r.focus&&r.focus()}function m(e){var t;C.length()>0&&(t=C.top().value,t.modalDomEl.toggleClass(t.windowTopClass||"",e))}function f(){if(b&&-1===d()){var e=S;g(b,S,function(){e=null}),b=void 0,S=void 0}}function g(t,n,r,o){function i(){i.done||(i.done=!0,e.leave(t).then(function(){r&&r(),t.remove(),o&&o.resolve()}),n.$destroy())}var u,l=null,c=function(){return u||(u=a.defer(),l=u.promise),function(){u.resolve()}};return n.$broadcast(E.NOW_CLOSING_EVENT,c),a.when(l).then(i)}function h(e){if(e.isDefaultPrevented())return e;var t=C.top();if(t)switch(e.which){case 27:t.value.keyboard&&(e.preventDefault(),o.$apply(function(){E.dismiss(t.key,"escape key press")}));break;case 9:var n=E.loadFocusElementList(t),r=!1;e.shiftKey?(E.isFocusInFirstItem(e,n)||E.isModalFocused(e,t))&&(r=E.focusLastFocusableElement(n)):E.isFocusInLastItem(e,n)&&(r=E.focusFirstFocusableElement(n)),r&&(e.preventDefault(),e.stopPropagation())}}function v(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}function y(){Array.prototype.forEach.call(document.querySelectorAll("["+P+"]"),function(e){var t=parseInt(e.getAttribute(P),10),n=t-1;e.setAttribute(P,n),n||(e.removeAttribute(P),e.removeAttribute("aria-hidden"))})}var b,S,w,_="modal-open",C=u.createNew(),$=i.createNew(),E={NOW_CLOSING_EVENT:"modal.stack.now-closing"},T=0,A=null,P="data-bootstrap-modal-aria-hidden-count",k="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",M=/[A-Z]/g;return o.$watch(d,function(e){S&&(S.index=e)}),n.on("keydown",h),o.$on("$destroy",function(){n.off("keydown",h)}),E.open=function(t,a){function i(e){function t(e){var t=e.parent()?e.parent().children():[];return Array.prototype.filter.call(t,function(t){return t!==e[0]})}if(e&&"BODY"!==e[0].tagName)return t(e).forEach(function(e){var t="true"===e.getAttribute("aria-hidden"),n=parseInt(e.getAttribute(P),10);n||(n=t?1:0),e.setAttribute(P,n+1),e.setAttribute("aria-hidden","true")}),i(e.parent())}var u=n[0].activeElement,s=a.openedClass||_;m(!1),A=C.top(),C.add(t,{deferred:a.deferred,renderDeferred:a.renderDeferred,closedDeferred:a.closedDeferred,modalScope:a.scope,backdrop:a.backdrop,keyboard:a.keyboard,openedClass:a.openedClass,windowTopClass:a.windowTopClass,animation:a.animation,appendTo:a.appendTo}),$.put(s,t);var p=a.appendTo,f=d();f>=0&&!b&&(S=o.$new(!0),S.modalOptions=a,S.index=f,b=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),b.attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),a.backdropClass&&b.addClass(a.backdropClass),a.animation&&b.attr("modal-animation","true"),r(b)(S),e.enter(b,p),l.isScrollable(p)&&(w=l.scrollbarPadding(p),w.heightOverflow&&w.scrollbarWidth&&p.css({paddingRight:w.right+"px"})));var g;a.component?(g=document.createElement(c(a.component.name)),g=angular.element(g),g.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):g=a.content,T=A?parseInt(A.value.modalDomEl.attr("index"),10)+1:0;var h=angular.element('<div uib-modal-window="modal-window"></div>');h.attr({class:"modal","template-url":a.windowTemplateUrl,"window-top-class":a.windowTopClass,role:"dialog","aria-labelledby":a.ariaLabelledBy,"aria-describedby":a.ariaDescribedBy,size:a.size,index:T,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(g),a.windowClass&&h.addClass(a.windowClass),a.animation&&h.attr("modal-animation","true"),p.addClass(s),a.scope&&(a.scope.$$topModalIndex=T),e.enter(r(h)(a.scope),p),C.top().value.modalDomEl=h,C.top().value.modalOpener=u,i(h)},E.close=function(e,t){var n=C.get(e);return y(),n&&v(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),p(e,n.value.modalOpener),!0):!n},E.dismiss=function(e,t){var n=C.get(e);return y(),n&&v(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),p(e,n.value.modalOpener),!0):!n},E.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},E.getTop=function(){return C.top()},E.modalRendered=function(e){var t=C.get(e);t&&t.value.renderDeferred.resolve()},E.focusFirstFocusableElement=function(e){return e.length>0&&(e[0].focus(),!0)},E.focusLastFocusableElement=function(e){return e.length>0&&(e[e.length-1].focus(),!0)},E.isModalFocused=function(e,t){if(e&&t){var n=t.value.modalDomEl;if(n&&n.length)return(e.target||e.srcElement)===n[0]}return!1},E.isFocusInFirstItem=function(e,t){return t.length>0&&(e.target||e.srcElement)===t[0]},E.isFocusInLastItem=function(e,t){return t.length>0&&(e.target||e.srcElement)===t[t.length-1]},E.loadFocusElementList=function(e){if(e){var t=e.value.modalDomEl;if(t&&t.length){var n=t[0].querySelectorAll(k);return n?Array.prototype.filter.call(n,function(e){return s(e)}):n}}},E}]).provider("$uibModal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(t,n,r,o,a,i,u){function l(e){return e.template?n.when(e.template):o(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}var c={},s=null;return c.getPromiseChain=function(){return s},c.open=function(o){function c(){return h}var d=n.defer(),p=n.defer(),m=n.defer(),f=n.defer(),g={result:d.promise,opened:p.promise,closed:m.promise,rendered:f.promise,close:function(e){return u.close(g,e)},dismiss:function(e){return u.dismiss(g,e)}};if(o=angular.extend({},e.options,o),o.resolve=o.resolve||{},o.appendTo=o.appendTo||r.find("body").eq(0),!o.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!o.component&&!o.template&&!o.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var h;h=o.component?n.when(i.resolve(o.resolve,{},null,null)):n.all([l(o),i.resolve(o.resolve,{},null,null)]);var v;return v=s=n.all([s]).then(c,c).then(function(e){function n(t,n,r,o){t.$scope=i,t.$scope.$resolve={},r?t.$scope.$uibModalInstance=g:t.$uibModalInstance=g;var a=n?e[1]:e;angular.forEach(a,function(e,n){o&&(t[n]=e),t.$scope.$resolve[n]=e})}var r=o.scope||t,i=r.$new();i.$close=g.close,i.$dismiss=g.dismiss,i.$on("$destroy",function(){i.$$uibDestructionScheduled||i.$dismiss("$uibUnscheduledDestruction")});var l,c,s={scope:i,deferred:d,renderDeferred:f,closedDeferred:m,animation:o.animation,backdrop:o.backdrop,keyboard:o.keyboard,backdropClass:o.backdropClass,windowTopClass:o.windowTopClass,windowClass:o.windowClass,windowTemplateUrl:o.windowTemplateUrl,ariaLabelledBy:o.ariaLabelledBy,ariaDescribedBy:o.ariaDescribedBy,size:o.size,openedClass:o.openedClass,appendTo:o.appendTo},h={},v={};o.component?(n(h,!1,!0,!1),h.name=o.component,s.component=h):o.controller&&(n(v,!0,!1,!0),c=a(o.controller,v,!0,o.controllerAs),o.controllerAs&&o.bindToController&&(l=c.instance,l.$close=i.$close,l.$dismiss=i.$dismiss,angular.extend(l,{$resolve:v.$scope.$resolve},r)),l=c(),angular.isFunction(l.$onInit)&&l.$onInit()),o.component||(s.content=e[0]),u.open(g,s),p.resolve(!0)},function(e){p.reject(e),d.reject(e)}).finally(function(){s===v&&(s=null)}),g},c}]};return e}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t===e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,r=0;r<e.length;r++)if(t===e[r].key){n=r;break}return e.splice(n,1)[0]},removeTop:function(){return e.pop()},length:function(){return e.length}}}}}),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},n={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},r={};this.options=function(e){angular.extend(r,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(o,a,i,u,l,c,s,d,p){function m(e){if(27===e.which){var t=f.top();t&&(t.value.close(),t=null)}}var f=p.createNew();return u.on("keyup",m),s.$on("$destroy",function(){u.off("keyup",m)}),function(o,s,p,m){function g(e){var t=(e||m.trigger||p).split(" "),r=t.map(function(e){return n[e]||e});return{show:t,hide:r}}m=angular.extend({},t,r,m);var h=e(o),v=c.startSymbol(),y=c.endSymbol(),b="<div "+h+'-popup uib-title="'+v+"title"+y+'" '+(m.useContentExp?'content-exp="contentExp()" ':'content="'+v+"content"+y+'" ')+'origin-scope="origScope" class="uib-position-measure '+s+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(){var e=a(b);return function(t,n,r){function a(){j.isOpen?p():c()}function c(){(!q||t.$eval(r[s+"Enable"]))&&(b(),_(),j.popupDelay?x||(x=i(h,j.popupDelay,!1)):h())}function p(){v(),j.popupCloseDelay?O||(O=i(y,j.popupCloseDelay,!1)):y()}function h(){return v(),b(),j.content?(S(),void j.$evalAsync(function(){j.isOpen=!0,C(!0),V()})):angular.noop}function v(){x&&(i.cancel(x),x=null),N&&(i.cancel(N),N=null)}function y(){j&&j.$evalAsync(function(){j&&(j.isOpen=!1,C(!1),j.animation?I||(I=i(w,150,!1)):w())})}function b(){O&&(i.cancel(O),O=null),I&&(i.cancel(I),I=null)}function S(){k||(M=j.$new(),k=e(M,function(e){B?u.find("body").append(e):n.after(e)}),f.add(j,{close:y}),$())}function w(){v(),b(),E(),k&&(k.remove(),k=null,L&&i.cancel(L)),f.remove(j),M&&(M.$destroy(),M=null)}function _(){j.title=r[s+"Title"],j.content=W?W(t):r[o],j.popupClass=r[s+"Class"],j.placement=angular.isDefined(r[s+"Placement"])?r[s+"Placement"]:m.placement;var e=l.parsePlacement(j.placement);D=e[1]?e[0]+"-"+e[1]:e[0];var n=parseInt(r[s+"PopupDelay"],10),a=parseInt(r[s+"PopupCloseDelay"],10);j.popupDelay=isNaN(n)?m.popupDelay:n,j.popupCloseDelay=isNaN(a)?m.popupCloseDelay:a}function C(e){z&&angular.isFunction(z.assign)&&z.assign(t,e)}function $(){U.length=0,W?(U.push(t.$watch(W,function(e){j.content=e,!e&&j.isOpen&&y()})),U.push(M.$watch(function(){F||(F=!0,M.$$postDigest(function(){F=!1,j&&j.isOpen&&V()}))}))):U.push(r.$observe(o,function(e){j.content=e,!e&&j.isOpen?y():V()})),U.push(r.$observe(s+"Title",function(e){j.title=e,j.isOpen&&V()})),U.push(r.$observe(s+"Placement",function(e){j.placement=e?e:m.placement,j.isOpen&&V()}))}function E(){U.length&&(angular.forEach(U,function(e){e()}),U.length=0)}function T(e){j&&j.isOpen&&k&&(n[0].contains(e.target)||k[0].contains(e.target)||p())}function A(e){27===e.which&&p()}function P(){var e=[],o=[],i=t.$eval(r[s+"Trigger"]);G(),angular.isObject(i)?(Object.keys(i).forEach(function(t){e.push(t),o.push(i[t])}),R={show:e,hide:o}):R=g(i),"none"!==R.show&&R.show.forEach(function(e,t){"outsideClick"===e?(n.on("click",a),u.on("click",T)):e===R.hide[t]?n.on(e,a):e&&(n.on(e,c),n.on(R.hide[t],p)),n.on("keypress",A)})}var k,M,I,x,O,N,L,D,B=!!angular.isDefined(m.appendToBody)&&m.appendToBody,R=g(void 0),q=angular.isDefined(r[s+"Enable"]),j=t.$new(!0),F=!1,z=!!angular.isDefined(r[s+"IsOpen"])&&d(r[s+"IsOpen"]),W=!!m.useContentExp&&d(r[o]),U=[],V=function(){k&&k.html()&&(N||(N=i(function(){var e=l.positionElements(n,k,j.placement,B),t=angular.isDefined(k.offsetHeight)?k.offsetHeight:k.prop("offsetHeight"),r=B?l.offset(n):l.position(n);k.css({top:e.top+"px",left:e.left+"px"});var o=e.placement.split("-");k.hasClass(o[0])||(k.removeClass(D.split("-")[0]),k.addClass(o[0])),k.hasClass(m.placementClassPrefix+e.placement)||(k.removeClass(m.placementClassPrefix+D),k.addClass(m.placementClassPrefix+e.placement)),L=i(function(){var e=angular.isDefined(k.offsetHeight)?k.offsetHeight:k.prop("offsetHeight"),n=l.adjustTop(o,r,t,e);n&&k.css(n),L=null},0,!1),k.hasClass("uib-position-measure")?(l.positionArrow(k,e.placement),k.removeClass("uib-position-measure")):D!==e.placement&&l.positionArrow(k,e.placement),D=e.placement,N=null},0,!1)))};j.origScope=t,j.isOpen=!1,j.contentExp=function(){return j.content},r.$observe("disabled",function(e){e&&v(),e&&j.isOpen&&y()}),z&&t.$watch(z,function(e){j&&!e===j.isOpen&&a()});var G=function(){R.show.forEach(function(e){"outsideClick"===e?n.off("click",a):(n.off(e,c),n.off(e,a)),n.off("keypress",A)}),R.hide.forEach(function(e){"outsideClick"===e?u.off("click",T):n.off(e,p)})};P();var H=t.$eval(r[s+"Animation"]);j.animation=angular.isDefined(H)?!!H:m.animation;var K,Y=s+"AppendToBody";K=Y in r&&void 0===r[Y]||t.$eval(r[Y]),B=angular.isDefined(K)?K:B,t.$on("$destroy",function(){G(),w(),j=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(e,t,n,r){return{link:function(o,a,i){var u,l,c,s=o.$eval(i.tooltipTemplateTranscludeScope),d=0,p=function(){l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),c&&(e.leave(c).then(function(){l=null}),l=c,c=null)};o.$watch(t.parseAsResourceUrl(i.uibTooltipTemplateTransclude),function(t){var i=++d;t?(r(t,!0).then(function(r){if(i===d){var o=s.$new(),l=r,m=n(l)(o,function(t){p(),e.enter(t,a)});u=o,c=m,u.$emit("$includeContentLoaded",t)}},function(){i===d&&(p(),o.$emit("$includeContentError",t))}),o.$emit("$includeContentRequested",t)):p()}),o.$on("$destroy",p)}}}]).directive("uibTooltipClasses",["$uibPosition",function(e){return{restrict:"A",link:function(t,n,r){if(t.placement){var o=e.parsePlacement(t.placement);n.addClass(o[0])}t.popupClass&&n.addClass(t.popupClass),t.animation&&n.addClass(r.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),app.directive("updateCart",["CartService",function(e){return{restrict:"A",require:"^form",scope:{cart:"=updateCart",shippingIsBilling:"=?",params:"=?",error:"=?",onSubmit:"=?",onSuccess:"=?",onError:"=?"},link:function(t,n,r,o){n.bind("click",function(){t.onSubmit&&t.onSubmit(),t.error=null;var n=t.params||r.params;n=utils.mergeParams(n,null,null);var o=angular.copy(t.cart);t.shippingIsBilling&&o.customer.shipping_address&&(o.customer.shipping_address.name=null,o.customer.shipping_address.address_1=null,o.customer.shipping_address.address_2=null,o.customer.shipping_address.city=null,o.customer.shipping_address.state_prov=null,o.customer.shipping_address.postal_code=null,o.customer.shipping_address.country=null),e.update(o,t.params).then(function(e){t.cart&&(e.customer=t.cart.customer),t.cart=e,t.onSuccess&&t.onSuccess(e)},function(e){t.error=e,t.onError&&t.onError(e)})})}}}]),app.directive("updateInvoice",["InvoiceService",function(e){return{restrict:"A",require:"^form",scope:{invoice:"=updateInvoice",params:"=?",error:"=?",onSubmit:"=?",onSuccess:"=?",onError:"=?"},link:function(t,n,r,o){n.bind("click",function(){t.onSubmit&&t.onSubmit(),t.error=null;var n=t.params||r.params;n=utils.mergeParams(n,null,null),e.update(t.invoice,t.params).then(function(e){t.invoice=e,t.onSuccess&&t.onSuccess(e)},function(e){t.error=e,t.onError&&t.onError(e)})})}}}]),app.directive("addToCart",["CartService","gettextCatalog",function(e,t){return{restrict:"A",require:"^form",scope:{product:"=addToCart",params:"=?",quantity:"=?",error:"=?",onSubmit:"=?",onSuccess:"=?",onError:"=?"},link:function(n,r,o,a){r.bind("click",function(){if(n.onSubmit&&n.onSubmit(),1==a.$invalid)return void n.$apply(function(){n.error={type:"bad_request",reference:"AWu1twY",code:"invalid_input",message:t.getString("There was a problem with some of the information you supplied. Please review for errors and try again."),status:400}});n.error=null;var r={product_id:n.product.product_id};n.quantity&&(r.quantity=n.quantity);var i=n.params||o.params;i=utils.mergeParams(i,null,null),e.addItem(r,n.params).then(function(e){n.item=e,n.onSuccess&&n.onSuccess(e)},function(e){n.error=e,n.onError&&n.onError(e)})})}}}]),app.directive("submitPayment",["CartService","InvoiceService","PaymentService","gettextCatalog",function(e,t,n,r){return{restrict:"A",require:"^form",scope:{paymentMethod:"=submitPayment",cart:"=?",invoice:"=?",payment:"=?",params:"=?",cartParams:"=?",error:"=?",onSubmit:"=?",onSuccess:"=?",onValidationSuccess:"=?",onValidationError:"=?",onError:"=?",shippingIsBilling:"=?",getConsentStatus:"=?",loading:"=?"},link:function(o,a,i,u){a.bind("click",function(){function l(){var e=null;return 1==u.$invalid&&(e={type:"bad_request",reference:"kI1ETNz",code:"invalid_input",message:r.getString("There was a problem with some of the information you supplied. Please review for errors and try again."),status:400}),o.onValidationError&&o.onValidationError(e),o.loading=!1,e}function c(){var e=null;return o.payment.total||o.payment.subtotal||o.payment.shipping||(e={type:"bad_request",reference:"eiptRbg",code:"invalid_input",message:r.getString("Please provide an amount for your payment."),status:400}),o.onValidationError&&o.onValidationError(e),o.loading=!1,e}if(o.loading=!0,o.onSubmit){var s=o.onSubmit();if(s===!1)return void(o.loading=!1)}var d=null;switch(o.paymentMethod.type){case"credit_card":if(d=l())return o.$apply(function(){o.error=d}),o.onValidationError&&o.onValidationError(d),void(o.loading=!1);break;case"paypal":if(o.cart||o.invoice||(d=c()),d)return o.$apply(function(){o.error=d,o.onValidationError&&o.onValidationError(d)}),void(o.loading=!1);case"amazon_pay":if(!o.paymentMethod.data.billing_agreement_id&&!o.paymentMethod.save||o.getConsentStatus()||(d={type:"bad_request",reference:"nauRcF8",code:"invalid_input",message:r.getString("Please check the box to provide consent to save your payment method for future payments."),status:400}),o.cart||o.invoice||(d=c()),d)return o.$apply(function(){o.error=d,o.onValidationError&&o.onValidationError(d)}),void(o.loading=!1)}if(o.onValidationSuccess){var s=o.onValidationSuccess();if(s===!1)return void(o.loading=!1)}o.payment&&(o.payment.total&&(o.payment.total=Number(o.payment.total)),o.payment.subtotal&&(o.payment.subtotal=Number(o.payment.subtotal)),o.payment.shipping&&(o.payment.shipping=Number(o.payment.shipping)),o.payment.tax&&(o.payment.tax=Number(o.payment.tax))),a.prop("disabled",!0),o.error=null;var p=o.params||i.params;p=utils.mergeParams(p,null,"order"),o.cart&&(o.shippingIsBilling&&delete o.cart.customer.shipping_address,e.pay(o.cart,o.paymentMethod,p,o.cartParams).then(function(e){o.onSuccess&&o.onSuccess(e),e.cart&&e.cart.url&&(o.cart=e.cart),o.loading=!1,a.prop("disabled",null)},function(e){o.error=e,o.onError&&o.onError(e),o.loading=!1,a.prop("disabled",null)})),o.invoice&&t.pay(o.invoice,o.paymentMethod,p,saleParams).then(function(e){o.onSuccess&&o.onSuccess(e),e.invoice&&e.invoice.url&&(o.invoice=e.invoice),o.loading=!1,a.prop("disabled",null)},function(e){o.error=e,o.onError&&o.onError(e),o.loading=!1,a.prop("disabled",null)}),o.payment&&(o.payment.payment_method=o.paymentMethod,o.shippingIsBilling&&o.payment.customer&&delete o.payment.customer.shipping_address,n.createDirect(o.payment,p).then(function(e){o.onSuccess&&o.onSuccess(e),o.loading=!1,a.prop("disabled",null)},function(e){o.error=e,o.onError&&o.onError(e),o.loading=!1,a.prop("disabled",null)}))})}}}]),app.directive("commitPayment",["CartService","InvoiceService","PaymentService","gettextCatalog",function(e,t,n,r){return{restrict:"A",require:"^form",scope:{paymentId:"=commitPayment",sale:"=?",invoice:"=?",params:"=?",error:"=?",onSubmit:"=?",onSuccess:"=?",onError:"=?"},link:function(t,o,a,i){o.bind("click",function(){if(t.onSubmit&&t.onSubmit(),1==i.$invalid)return t.$apply(function(){t.error={type:"bad_request",reference:"eS9G9MA",code:"invalid_input",message:r.getString("There was a problem with some of the information you supplied. Please review for errors and try again."),status:400}}),void(t.onError&&t.onError(error));o.prop("disabled",!0),t.error=null;var u=t.params||a.params;u=utils.mergeParams(u,null,"order");var l=function(e,r){n.commit(e,r).then(function(e){t.onSuccess&&t.onSuccess(e),o.prop("disabled",null)},function(e){t.error=e,t.onError&&t.onError(e),o.prop("disabled",null)})};"cart"==a.saleType?e.update(t.sale).then(function(e){l(t.paymentId,u)},function(e){t.error=e,t.onError&&t.onError(e),o.prop("disabled",null)}):l(t.paymentId,u)})}}}]),app.directive("currencySelect",["CurrencyService","CartService","InvoiceService","PaymentService","ProductService","SettingsService","StorageService","$timeout","$rootScope",function(e,t,n,r,o,a,i,u,l){return{restrict:"A",scope:{currency:"=selectCurrency",cart:"=?",invoice:"=?",payment:"=?",options:"=?",products:"=?",params:"=?",onSuccess:"=?",onError:"=?",error:"=?"},link:function(c,s,d){var p=a.get();if(utils.hasProperty(d,"asDropdown")){var m=angular.element(s[0]);_.each(p.account.currencies,function(e){var t='<li><a class="pointer">'+e.name+"</a></li>";optionNg=angular.element(t),m.append(optionNg),optionNg.bind("click",function(t){c.error=null,u(function(){h(c,e.code,d)})})});var f=angular.element(s.parent().children()),g=f.find("span");g&&g.text(e.getCurrencyName()),l.$on("currencyChanged",function(t,n){var r=angular.element(s.parent().children()),o=r.find("span");o&&o.text(e.getCurrencyName())})}else{var m=angular.element(s[0]);_.each(p.account.currencies,function(t){var n='<option value="'+t.code+'"';t.code==e.getCurrency()&&(n+=" selected"),n+=">"+t.name+"</option>",m.append(n)}),s.bind("change",function(e){c.error=null;var t=angular.element(s[0]).val();u(function(){h(c,t,d)})}),l.$on("currencyChanged",function(e,t){m[0].value=t})}var h=function(a,u,l){var c=a.params||l.params;if(c=utils.mergeParams(c,null,null),a.cart&&i.get("cart_id")&&t.update({currency:u},a.params).then(function(t){e.setCurrency(u);var n=null;a.cart&&(n=a.cart.customer),a.cart=t,n&&(a.cart.customer=n),a.onSuccess&&a.onSuccess(u)},function(e){a.error=e,a.onError&&a.onError(e)}),a.invoice&&i.get("invoice_id")&&n.update({currency:u},a.params).then(function(t){e.setCurrency(u);var n=null;a.invoice&&(n=a.invoice.customer),a.invoice=t,n&&(a.invoice.customer=n),a.onSuccess&&a.onSuccess(u)},function(e){a.error=e,a.onError&&a.onError(e)}),a.payment&&(a.payment.currency=u,a.options&&r.getOptions({currency:u}).then(function(e){a.options=e},function(e){a.error=e,a.onError&&a.onError(e)}),a.onSuccess&&a.onSuccess(u),e.setCurrency(u),a.payment.currency=u),a.products){utils.getQueryParameters(a.products.current_page_url);c.currency=u,o.getList(a.params).then(function(n){a.products=n,e.setCurrency(u),i.get("cart_id")&&t.update({currency:u},a.params,!0),
a.onSuccess&&a.onSuccess(u)},function(e){a.error=e,a.onError&&a.onError(e)})}if(a.product){utils.getQueryParameters(a.product.url);a.params.currency=u,o.get(a.product.product_id,a.params).then(function(n){a.product=n,e.setCurrency(u),i.get("cart_id")&&t.update({currency:u},a.params,!0),a.onSuccess&&a.onSuccess(u)},function(e){a.error=e,a.onError&&a.onError(e)})}}}}}]),app.directive("languageSelect",["LanguageService","$timeout","$rootScope",function(e,t,n){return{restrict:"A",link:function(r,o,a){var i=e.getLanguages();if(utils.hasProperty(a,"asDropdown")){var u=angular.element(o[0]);_.each(i,function(n){var r='<li><a class="pointer">'+n.name+"</a></li>";optionNg=angular.element(r),u.append(optionNg),optionNg.bind("click",function(r){t(function(){e.setLanguage(n.code,a.languagesPath)})})});var l=angular.element(o.parent().children()),c=l.find("span");c&&c.text(e.getSelectedLanguage().name),n.$on("languageChanged",function(t,n){var r=angular.element(o.parent().children()),a=r.find("span");a&&a.text(e.getSelectedLanguage().name)})}else{var u=angular.element(o[0]);_.each(i,function(t){var n='<option value="'+t.code+'"';t.code==e.getSelectedLanguage().code&&(n+=" selected"),n+=">"+t.name+"</option>",u.append(n)}),o.bind("change",function(n){var r=angular.element(o[0]).val();t(function(){e.setLanguage(r)})}),n.$on("languageChanged",function(e,t){u[0].value=t})}}}}]),app.directive("shippingSelect",["CartService","InvoiceService","$timeout",function(e,t,n){return{restrict:"A",scope:{sale:"=?",shippingQuotes:"=?",params:"=?",onSuccess:"=?",onError:"=?",error:"=?"},link:function(r,o,a){r.$watch("shippingQuotes",function(e,t){if(e){var n=null;r.sale.shipping_item&&(n=r.sale.shipping_item.item_id);var a=angular.element(o[0]);a.html(""),_.each(r.shippingQuotes,function(e){var t='<option value="'+e.method_id+'"';e.method_id==n&&(t+=" selected"),t+=">"+e.description+" ("+e.formatted.price+")</option>",a.append(t)})}}),o.bind("change",function(i){r.error=null;var u=angular.element(o[0]).val(),l=r.params||a.params;l=utils.mergeParams(l,null,null),n(function(){var n={shipping_method_id:u};"cart"==a.saleType&&e.update(n,r.params).then(function(e){e.customer=r.sale.customer,r.sale=e,r.onSuccess&&r.onSuccess(selectedCurrency)},function(e){r.error=e,r.onError&&r.onError(e)}),"invoice"==a.saleType&&t.update(n,r.params).then(function(e){e.customer=r.sale.customer,r.sale=e,r.onSuccess&&r.onSuccess(selectedCurrency)},function(e){r.error=e,r.onError&&r.onError(e)})})})}}}]),app.directive("shippingRadio",["CartService","InvoiceService","$timeout",function(e,t,n){return{restrict:"A",scope:{sale:"=?",shippingQuotes:"=?",params:"=?",onSuccess:"=?",onError:"=?",error:"=?"},link:function(r,o,a){o.bind("change",function(o){r.error=null;var i=a.shippingRadio,u=r.params||a.params;u=utils.mergeParams(u,null,null),n(function(){var n={shipping_method_id:i};"cart"==a.saleType&&e.update(n,r.params).then(function(e){r.sale&&(e.customer=r.sale.customer),r.sale=e,r.onSuccess&&r.onSuccess(selectedCurrency)},function(e){r.error=e,r.onError&&r.onError(e)}),"invoice"==a.saleType&&t.update(n,r.params).then(function(e){r.sale&&(e.customer=r.sale.customer),r.sale=e,r.onSuccess&&r.onSuccess(selectedCurrency)},function(e){r.error=e,r.onError&&r.onError(e)})})})}}}]),app.directive("customerCountries",["GeoService","$timeout",function(e,t){return{restrict:"A",require:"ngModel",scope:{customerCountries:"=?"},link:function(t,n,r,o){t.$watch("customerCountries",function(t,r){if(t){for(var a=angular.element(n[0]),i=!1,u=a[0].options.length-1;u>=0;u--)a[0].options[u].value?a[0].remove(u):i=!0;i||a[0].appendChild(document.createElement("option"));var l=e.getData().countries;l=_.filter(l,function(e){return t.indexOf(e.code)>-1});var c=o.$viewValue||o.$modelValue,s=!1;_.each(l,function(e){var t='<option class="select-options-color" value="'+e.code+'"';e.code==c&&(t+=" selected",s=!0),t+=">"+e.name+"</option>",a.append(t)}),0==s&&o.$setViewValue(null)}})}}}]),app.directive("showErrors",["$timeout","SettingsService",function(e,t){return{restrict:"A",require:"^form",link:function(n,r,o,a){var i=function(){e(function(){var e=r[0].querySelector("[name]"),i=r[0].querySelector("label"),u=angular.element(r[0].querySelector(".error-block")),l=angular.element(e),c=angular.element(i),s=angular.element(u);r.removeClass("has-error"),s.addClass("hidden");var d=l.attr("name");n.$watch(o.showErrors,function(t,n){t&&e&&(e.required?c&&c.addClass("required"):c.removeClass("required"))});var p="blur";e&&("checkbox"!=e.type&&"radio"!=e.type||(p="change")),l.bind(p,function(){var e=t.get(),n=e.app.error_notifications||"moderate";"moderate"==n&&r.toggleClass("has-error",a[d].$invalid),"aggressive"==n&&(r.toggleClass("has-error",a[d].$invalid),s.toggleClass("hidden",!a[d].$invalid)),0==a[d].$invalid&&s.toggleClass("hidden",!0)}),n.$on("show-errors-check-validity",function(){a[d]&&(r.toggleClass("has-error",a[d].$invalid),s.toggleClass("hidden",!a[d].$invalid))})})};i(),o.refreshOnChange&&n.$watch(o.refreshOnChange,function(e,t){i()})}}}]),app.directive("conversion",["SettingsService","StorageService",function(e,t){return{restrict:"A",scope:{conversion:"@"},link:function(t,n,r,o){var a=function(){r.$observe("conversion",function(e){if(0==utils.isNullOrEmpty(e)){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.id="__conversion",n.type="text/javascript",n.src="analytics/conversion.js",n.setAttribute("data-order_id",e),null!=document.getElementById("__conversion")&&t.removeChild(document.getElementById("__conversion")),t.appendChild(n)}})},i=e.get();1!=i.config.development&&a()}}}]),app.directive("validateOnSubmit",function(){return{restrict:"A",require:"^form",link:function(e,t,n,r){t.bind("click",function(){e.$broadcast("show-errors-check-validity")})}}}),app.directive("validateExpMonth",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$parsers.unshift(function(e){return 0==utils.isValidInteger(e)?void r.$setValidity("month",!1):e>12?void r.$setValidity("month",!1):e<1?void r.$setValidity("month",!1):(r.$setValidity("month",!0),e)})}}}),app.directive("validateExpYear",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$parsers.unshift(function(e){return 0==utils.isValidInteger(e)?void r.$setValidity("year",!1):e.length>4?void r.$setValidity("year",!1):e.length<2?void r.$setValidity("year",!1):(r.$setValidity("year",!0),e)})}}}),app.directive("validateCvv",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$parsers.unshift(function(e){var t,o=n.validateCvv;return o&&(t="3"==o.substring(0,1).toString()?4:3),0==utils.isValidInteger(e)?void r.$setValidity("cvv",!1):e.length<3?void r.$setValidity("cvv",!1):e.length>4?void r.$setValidity("cvv",!1):t&&e.length!=t?void r.$setValidity("cvv",!1):(r.$setValidity("cvv",!0),e)})}}}),app.directive("validateCard",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$parsers.unshift(function(e){return e=utils.removeWhitespace(e),utils.isNullOrEmpty(e)?void r.$setValidity("card",!1):0==/^\d+$/.test(e)?void r.$setValidity("card",!1):e.length<14?void r.$setValidity("card",!1):e.length>19?void r.$setValidity("card",!1):0==utils.luhnCheck(e)?void r.$setValidity("card",!1):(r.$setValidity("card",!0),e)})}}}),app.directive("isValidInteger",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$validators.characters=function(e,t){var r=e||t;return"true"==n.allowEmptyValue&&(""==r||null==r)||0!=utils.isValidInteger(r)&&(!(n.max&&r>n.max)&&(!(n.lessThan&&r>=n.lessThan)&&(!(n.min&&r<n.min)&&!(n.greaterThan&&r<=n.greaterThan))))}}}}),app.directive("isValidNumber",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$validators.characters=function(e,t){var r=e||t;return"true"==n.allowEmptyValue&&(""==r||null==r)||0!=utils.isValidNumber(r)&&(!(n.max&&r>n.max)&&(!(n.lessThan&&r>=n.lessThan)&&(!(n.min&&r<n.min)&&!(n.greaterThan&&r<=n.greaterThan))))}}}}),app.directive("promoCode",["CartService","$timeout",function(e,t){return{restrict:"A",scope:{cart:"=?",params:"=?",error:"=?",onAdd:"=?",onRemove:"=?",onError:"=?"},link:function(n,r,o,a){var i=angular.element(r[0].querySelector(".ask-promo-code")),u=angular.element(r[0].querySelector(".supply-promo-code")),l=angular.element(r[0].querySelector(".applied-promo-code")),c=angular.element(r.find("input")),s=angular.element(r[0].querySelector(".apply-promo-code")),d=angular.element(r[0].querySelector(".remove-promo-code"));u.addClass("hidden"),l.addClass("hidden"),n.$watch("cart",function(e,t){e&&(e.promotion_code?(i.addClass("hidden"),l.removeClass("hidden")):l.addClass("hidden"))}),i.bind("click",function(){i.addClass("hidden"),u.removeClass("hidden"),t(function(){r.find("input")[0].focus()})}),s.bind("click",function(){var t=c.val();if(!utils.isNullOrEmpty(t)){n.error=null;var r={promotion_code:t},a=n.params||o.params;a=utils.mergeParams(a,null,null),e.update(r,n.params).then(function(e){n.cart=e,n.onAdd&&n.onAdd(e),u.addClass("hidden"),l.removeClass("hidden")},function(e){n.error=e,n.onError&&n.onError(e)})}}),d.bind("click",function(){c.val(""),n.error=null;var t={promotion_code:null},r=n.params||o.params;r=utils.mergeParams(r,null,null),e.update(t,n.params).then(function(e){n.cart=e,n.onRemove&&n.onRemove(e),i.removeClass("hidden"),l.addClass("hidden")},function(e){n.error=e,n.onError&&n.onError(e)})}),c.bind("blur",function(){utils.isNullOrEmpty(c.val())&&(u.addClass("hidden"),l.addClass("hidden"),i.removeClass("hidden"),t(function(){n.error=null}))})}}}]),app.directive("customerSignin",["CartService","CustomerService","$timeout",function(e,t,n){return{restrict:"A",scope:{cart:"=",customer:"=",paymentMethod:"=?",options:"=?",params:"=?",error:"=?",onSigninSubmit:"=?",onSignoutSubmit:"=?",onSigninSuccess:"=?",onSignoutSuccess:"=?",onSigninError:"=?",onSignoutError:"=?"},link:function(r,o,a){var i=angular.element(o[0].querySelector(".ask-signin")),u=angular.element(o[0].querySelector(".show-signin")),l=angular.element(o[0].querySelector(".supply-signin")),c=angular.element(o[0].querySelector(".signin-username")),s=angular.element(o[0].querySelector(".signin-password")),d=angular.element(o[0].querySelector(".submit-signin")),p=angular.element(o[0].querySelector(".cancel-signin")),m=angular.element(o[0].querySelector(".signed-in")),f=angular.element(o[0].querySelector(".submit-signout")),g=function(){i.addClass("hidden"),l.addClass("hidden"),m.addClass("hidden")};o.addClass("hidden"),g(),r.$watchGroup(["options","cart","customer"],function(e,t){var n=e[0],r=e[1],a=e[2];n&&n.customer_optional_fields&&n.customer_optional_fields.indexOf("username")>=0&&(g(),o.removeClass("hidden"),i.removeClass("hidden")),r&&r.customer&&(g(),r.customer.username?m.removeClass("hidden"):i.removeClass("hidden")),a&&(g(),a.username?m.removeClass("hidden"):i.removeClass("hidden"))},!0),u.bind("click",function(){i.addClass("hidden"),l.removeClass("hidden"),n(function(){o.find("input")[0].focus()})}),s.bind("keydown",function(e){13==e.which&&h()}),c.bind("keydown",function(e){13==e.which&&h()}),d.bind("click",function(e){h()}),f.bind("click",function(){if(r.onSignoutSubmit&&r.onSignoutSubmit(),r.cart){var t=r.params||a.params;t=utils.mergeParams(t,null,"customer.payment_methods"),e.logout(t).then(function(e){r.cart=e,delete r.paymentMethod.payment_method_id,r.onSignoutSuccess&&r.onSignoutSuccess(e)},function(e){r.error=e,r.onSignoutError&&r.onSignoutError(e)})}else r.customer&&(r.$apply(function(){r.customer={billing_address:{country:null},shipping_address:{country:null}},delete r.paymentMethod.payment_method_id}),r.onSignoutSuccess&&r.onSignoutSuccess())}),p.bind("click",function(){c.val(""),s.val(""),r.error=null,g(),i.removeClass("hidden")});var h=function(){var n=c.val(),o=s.val();if(!utils.isNullOrEmpty(n)&&!utils.isNullOrEmpty(o)){r.error=null,r.onSigninSubmit&&r.onSigninSubmit();var i={username:n,password:o};if(r.cart){var u=r.params||a.params;u=utils.mergeParams(u,null,"customer.payment_methods"),e.login(i,u).then(function(e){if(r.cart=e,c.val(""),s.val(""),e.customer.payment_methods.data.length>0&&r.paymentMethod){var t=_.findWhere(e.customer.payment_methods.data,{is_default:!0}).payment_method_id;r.paymentMethod={payment_method_id:t}}r.onSigninSuccess&&r.onSigninSuccess(e)},function(e){r.error=e,r.onSigninError&&r.onSigninError(e)})}else{var u=r.params||a.params;u=utils.mergeParams(u,null,"payment_methods"),t.login(i,u).then(function(e){if(r.customer=e,c.val(""),s.val(""),e.payment_methods.data.length>0&&r.paymentMethod){var t=_.findWhere(e.payment_methods.data,{is_default:!0}).payment_method_id;r.paymentMethod={payment_method_id:t}}r.onSigninSuccess&&r.onSigninSuccess(e)},function(e){r.error=e,r.onSigninError&&r.onSigninError(e)})}}}}}}]),app.directive("createAccount",["CustomerService","$timeout",function(e,t){return{restrict:"A",scope:{customer:"=",options:"=?",params:"=?",error:"=?",onSubmit:"=?",onSuccess:"=?",onError:"=?"},link:function(t,n,r){var o=angular.element(n[0].querySelector(".supply-credentials")),a=angular.element(n[0].querySelector(".create-account-username")),i=angular.element(n[0].querySelector(".create-account-password")),u=angular.element(n[0].querySelector(".submit-create-account")),l=angular.element(n[0].querySelector(".account-created"));n.addClass("hidden"),l.addClass("hidden"),t.$watchGroup(["options","customer"],function(e,t){var r=e[0],o=e[1];r&&o&&r.customer_optional_fields&&r.customer_optional_fields.indexOf("username")>=0&&!o.username&&n.removeClass("hidden")}),i.bind("keydown",function(e){13==e.which&&c()}),a.bind("keydown",function(e){13==e.which&&c()}),u.bind("click",function(e){c()});var c=function(){var n=a.val(),u=i.val();if(!utils.isNullOrEmpty(n)&&!utils.isNullOrEmpty(u)){t.error=null,t.onSubmit&&t.onSubmit(),t.customer.username=n,t.customer.password=u;var c=t.params||r.params;c=utils.mergeParams(c,null,"customer.payment_methods"),e.createAccount(t.customer,t.params).then(function(e){t.customer=e,a.val(""),i.val(""),l.removeClass("hidden"),o.addClass("hidden"),t.onSuccess&&t.onSuccess(e)},function(e){t.error=e,t.onError&&t.onError(e)})}}}}}]),app.directive("selectStateProv",["GeoService","$timeout",function(e,t){return{restrict:"A",require:"ngModel",link:function(t,n,r,o){t.$watch(r.country,function(t,r){if(t){for(var a=e.getStatesProvs(t),i=angular.element(n[0]),u=!1,l=i[0].options.length-1;l>=0;l--)i[0].options[l].value?i[0].remove(l):u=!0;u||i[0].appendChild(document.createElement("option"));var c=o.$viewValue||o.$modelValue,s=!1;_.each(a,function(e){var t='<option class="select-options-color" value="'+e.code+'"';c==e.code&&(t+=" selected",s=!0),t+=">"+e.name+"</option>",i.append(t)}),0==s&&o.$setViewValue(null)}})}}}]),app.directive("customerBackgroundSave",["CartService","$timeout",function(e,t){return{restrict:"A",scope:{cart:"=customerBackgroundSave",shippingIsBilling:"=?",params:"=?",error:"=?",onSuccess:"=?"},link:function(n,r,o,a){var i,u=document.querySelectorAll(".customer-background-save");_.each(u,function(r){var a="blur";"SELECT"==r.nodeName&&(a="change"),"checkbox"==r.type&&(a="click");var u=angular.element(r),l=u.val();u.bind(a,function(){"blur"==a&&angular.equals(l,u.val())||(l=u.val(),i&&t.cancel(i),i=t(function(){var t=angular.copy(n.cart);utils.undefinedToNull(t);var a=n.params||o.params;if(a=utils.mergeParams(a,null,null),n.cart){var i=r.getAttribute("ng-model");i&&(i=i.split("customer.")[1],n.cart.customer[i]=u.val(),n.shippingIsBilling&&t.customer.shipping_address&&(t.customer.shipping_address.name=null,t.customer.shipping_address.address_1=null,t.customer.shipping_address.address_2=null,t.customer.shipping_address.city=null,t.customer.shipping_address.state_prov=null,t.customer.shipping_address.postal_code=null,t.customer.shipping_address.country=null),e.update(t,n.params,!0).then(function(e){n.cart&&(e.customer=n.cart.customer),n.cart=e,n.onSuccess&&n.onSuccess(e)},function(e){n.error=e}))}},25))})})}}}]),app.directive("creditCardImage",[function(){return{restrict:"A",link:function(e,t,n){e.$watch(n.creditCardImage,function(e){var r="images/";if(n.path&&(r=n.path),e){var o=e.replace(" ","").toLowerCase()+".png",a='<img src="'+r+o+'" />',i=angular.element(t);i.empty(),i.html(a)}})}}}]),app.directive("creditCards",["CartService",function(e){return{restrict:"A",link:function(e,t,n){var r="images/";n.path&&(r=n.path),e.$watch(n.creditCards,function(e){if(_.isArray(e)){var n="";_.each(e,function(e){var t=e.replace(" ","").toLowerCase()+".png";n+='<img src="'+r+t+'" title="'+e+'" />'});var o=angular.element(t);o.empty(),o.html(n)}})}}}]),app.directive("stateProvInput",["GeoService","$compile",function(e,t){return{restrict:"E",terminal:!0,link:function(n,r,o){o.$observe("country",function(a){if(a){var i=e.getStatesProvs(o.country);if("select"==o.type){var u=r[0].querySelector("select").outerHTML;if(null==i){u=u.replace("ng-model","suspend-model");var l=angular.element(u);r.empty(),r.append(l),t(l)(n)}else{u=u.replace("suspend-model","ng-model");var l=angular.element(u);r.empty(),r.append(l),t(l)(n)}}if("input"==o.type){var u=r[0].querySelector("input").outerHTML;if(null!=i){u=u.replace("ng-model","suspend-model");var l=angular.element(u);r.empty(),r.append(l),t(l)(n)}else{u=u.replace("suspend-model","ng-model");var l=angular.element(u);r.empty(),r.append(l),t(l)(n)}}}})}}}]),app.directive("selectOnClick",function(){return{restrict:"A",link:function(e,t,n){t.on("click",function(){this.select()})}}}),app.directive("fields",["CartService","InvoiceService","$timeout","$rootScope","LanguageService",function(e,t,n,r,o){return{restrict:"AE",templateUrl:"app/templates/fields.html",scope:{fieldlist:"=",sale:"=",appSettings:"=",appStyle:"="},link:function(n,a,i,u){n.fields=[];var l=function(e){var t=[];if("string"==typeof e&&0==utils.isNullOrEmpty(e))try{t=JSON.parse(e)}catch(e){t=[],console.log("The JSON provided for custom fields is not valid JSON. As a result, no custom fields will display. Error message: "+e)}t=c(t);var n=o.getSelectedLanguage().code;return _.each(t,function(e){e.languages&&e.languages[n]&&(e.languages[n].label&&(e.label=e.languages[n].label),e.languages[n].description&&(e.description=e.languages[n].description),e.languages[n].section&&(e.section=e.languages[n].section),e.languages[n].options&&(e.options=e.languages[n].options))}),t},c=function(e){var t=[],n=[];return _.each(e,function(r){if(n.indexOf(r.section)==-1){var o=_.where(e,{section:r.section});o&&(t=t.concat(o),n.push(r.section))}}),t},s=function(e,t){for(var r in e)e.hasOwnProperty(r)&&null==n.sale.meta[e[r].name]&&(n.sale.meta[e[r].name]=e[r].default_value)};n.fields=l(n.fieldlist);var d=n.$watch("sale.meta",function(e,t){null!=n.sale&&(null==n.sale.meta&&(n.sale.meta={}),s(n.fields,n.sale.meta),d())},!0);r.$on("languageChanged",function(e,t){n.fields=l(n.fieldlist)}),n.pushToProperty=function(e,t,r){0==n.isInProperty(e,t)?null==n.sale.meta[e]?(n.sale.meta[e]=[],n.sale.meta[e].push(t)):n.sale.meta[e].push(t):n.sale.meta[e]=_.without(n.sale.meta[e],t),r&&n.record()},n.isInProperty=function(e,t){return null!=n.sale&&(null!=n.sale.meta&&(null!=n.sale.meta[e]&&_.indexOf(n.sale.meta[e],t)>=0))},n.isNewSection=function(e,t){if(0==t)return!0;var r=n.fields[t-1];return null!=r&&r.section!=e.section},n.record=function(){var r={meta:n.sale.meta};"invoice"==n.sale.object?t.update(r):e.update(r)}}}}]),app.directive("validateField",["gettextCatalog","$timeout",function(e,t){return{restrict:"A",require:"ngModel",scope:{field:"=validateField",error:"=?"},link:function(t,n,r,o){var a=(t.error,t.field);utils.isNullOrEmpty(n[0].value)&&1==a.required&&(t.error=e.getString("Please provide a value")),"boolean"==a.type&&1==a.required&&(t.error=e.getString("Please make a selection")),"toggle"==a.type&&1==a.required&&(t.error=e.getString("Please confirm")),o.$parsers.unshift(function(n){var r=null;if(null!=n||1==a.required){switch(a.type){case"integer":utils.isValidInteger(n)||(r=e.getString("Please supply a number without decimals"));break;case"decimal":utils.isValidNumber(n)||(r=e.getString("Please supply a number"))}null!=a.options&&utils.isNullOrEmpty(n)&&(r=e.getString("Please make a selection")),null==r&&(null!=a.options&&null==_.where(a.options,{value:n})&&(r=e.getString("Please provide one of the available options")),"integer"!=a.type&&"decimal"!=a.type||(a.min_value&&n<a.min_value&&(r=e.getPlural(a.min_value,"The value you provide must be greater than {{$count}}","The value you provide must be greater than {{$count}}",{})),a.max_value&&n>a.max_value&&(r=e.getPlural(a.max_value,"The value you provide must be less than {{$count}}","The value you provide must be less than {{$count}}",{}))),"string"!=a.type&&"text"!=a.type||(a.min_length&&n.length<a.min_length&&(r=e.getPlural(a.min_length,"The value must be at least one character","The value must be at least {{$count}} characters",{})),a.max_length&&n.length>a.max_length&&(r=e.getPlural(a.max_length,"The value must be less than one character","The value must be less than {{$count}} characters",{}))))}return null!=r?(o.$setValidity("field",!1),void(t.error=r)):(o.$setValidity("field",!0),n)})}}}]),app.directive("cleanPrice",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var o=function(e){if(!angular.isUndefined(e)){var t=utils.cleanPrice(e);return t!==e&&(r.$setViewValue(t),r.$render()),t}};r.$parsers.unshift(o),o(e[n.ngModel])}}}]),app.directive("amazonPayButton",["gettextCatalog",function(e){return{restrict:"A",scope:{paymentMethod:"=?",options:"=?",items:"=?",params:"=?",onLoaded:"=?",onAddressSelect:"=?",onPaymentMethodSelect:"=?",onConsentChange:"=?",getConsentStatus:"=?",error:"=?",onError:"=?"},link:function(e,t,n,r){function o(t,r){amazonPay.createPaymentButton(t,r,n.id,n.amazonPayType,n.amazonPayColor,n.amazonPayButtonSize,function(o,i){if(o)return void l("external_server_error","remote_server_error",o,502);e.$apply(function(){u(i.access_token,i.order_reference_id,i.billing_agreement_id,r)});var c=a(e.items,e.paymentMethod.save);amazonPay.showWidgets(n.amazonPayAddressId,n.amazonPayWalletId,n.amazonPayConsentId,c),amazonPay.loadWidgets(t,r,c,n.amazonPayAddressId,n.amazonPayWalletId,n.amazonPayConsentId,e.onAddressSelect,e.onPaymentMethodSelect,e.onConsentChange,n.amazonPayDesignMode,"Edit",function(t,n){return t?void l("external_server_error","remote_server_error",t,502):void e.$apply(function(){u(n.access_token,n.order_reference_id,n.billing_agreement_id,n.seller_id)})})})}function a(t,n){for(var r in e.items)if(e.items[r].subscription_plan)return!0;return!!e.paymentMethod.save}function i(){c=null,s=null,u(null,null,null,null),amazonPay.logout()}function u(t,n,r,o){return t||n||r?void(e.paymentMethod.data={access_token:t,order_reference_id:n,billing_agreement_id:r,seller_id:o}):void(e.paymentMethod.data&&delete e.paymentMethod.data)}function l(t,n,r,o){e.$apply(function(){e.error={type:t,reference:"MmJAvA8",code:n,message:r,status:o},e.onError&&e.onError(error)})}var c=null,s=null;e.$watch("options",function(e,t){if(e){var r=_.findWhere(e.payment_methods,{payment_method_type:"amazon_pay"});r?r.amazon_pay_client_id==c&&r.amazon_pay_seller_id==s||(amazonPay.hideWidgets(n.amazonPayAddressId,n.amazonPayWalletId,n.amazonPayConsentId),(c||s)&&i(),c=r.amazon_pay_client_id,s=r.amazon_pay_seller_id,o(c,s)):amazonPay.hideWidgets(n.amazonPayAddressId,n.amazonPayWalletId,n.amazonPayConsentId)}}),e.getConsentStatus=function(){return amazonPay.getConsentStatus()}}}}]),app.directive("amazonPayReset",["gettextCatalog",function(e){return{restrict:"A",scope:{paymentMethod:"=?",onComplete:"=?"},link:function(e,t,n,r){t.bind("click",function(){e.$apply(function(){amazonPay.logout(),e.paymentMethod&&e.paymentMethod.data&&delete e.paymentMethod.data,e.onComplete&&e.onComplete()}),amazonPay.hideWidgets(n.amazonPayAddressId,n.amazonPayWalletId,n.amazonPayConsentId)})}}}]),app.directive("amazonPayWidgetRefresh",["gettextCatalog",function(e){return{restrict:"A",scope:{paymentError:"=?",options:"=?",params:"=?",onLoaded:"=?",onPaymentMethodSelect:"=?",error:"=?",onError:"=?"},link:function(e,t,n,r){function o(t,n,r,o){e.$apply(function(){e.error={type:t,reference:"MmJAvA8",code:n,message:r,status:o},e.onError&&e.onError(error)})}e.$watchGroup(["paymentError","options"],function(t,r){if(t&&t!=r){var a=t[0],i=t[1];if(a&&i){var u=a.payment_method.data,l=_.findWhere(i.payment_methods,{payment_method_type:"amazon_pay"});null!=u.billing_agreement_id;amazonPay.reRenderWidgets(l.amazon_pay_client_id,l.amazon_pay_seller_id,u.order_reference_id,u.billing_agreement_id,n.amazonPayWalletId,e.onPaymentMethodSelect,n.amazonPayDesignMode,function(e,t){return e?void o("external_server_error","remote_server_error",e,502):void amazonPay.showWidgets(null,n.amazonPayWalletId,null,!1)})}}})}}}]),app.directive("hidePlaceholder",function(){return{restrict:"A",scope:{hidePlaceholder:"=?"},link:function(e,t,n,r){if(e.hidePlaceholder&&t[0].getAttribute("placeholder")){t[0].removeAttribute("placeholder"),arr=t[0].className.split(" ");var o="hide-placeholder";arr.indexOf(o)==-1&&(t[0].className+=" "+o)}}}}),app.directive("selectNumbers",["GeoService","$timeout",function(e,t){return{restrict:"A",scope:{start:"=?",end:"=?"},link:function(e,t,n,r){e.$watchGroup(["start","end"],function(e,r){if(e[0]&&e[1]){for(var o=angular.element(t[0]),a=!1,i=o[0].options.length-1;i>=0;i--)o[0].options[i].value?o[0].remove(i):a=!0;a||o[0].appendChild(document.createElement("option"));for(var i=e[0];i<e[1]+1;i++){var u=i;n.minLength&&String(i).length<Number(n.minLength)&&(u=utils.right("0"+i,2));var l='<option class="select-options-color" value="'+i+'">'+u+"</option>";o.append(l)}}})}}}]),app.directive("crossSell",["CartService",function(e){return{restrict:"A",scope:{cart:"=?",add:"=?",remove:"=?",toggle:"=?",commit:"=?",commitQueued:"=?",queue:"=?",params:"=?",onSuccess:"=?",onError:"=?",error:"=?"},link:function(t,n,r,o){n.bind("click",function(){function n(e){return null!=_.findWhere(t.queue,{product_id:e.product_id})}t.error=null,t.queue=t.queue||[];var o=t.params||r.params;if(o=utils.mergeParams(o,null,null),r.add)return void(n(t.add)||t.$apply(function(){t.queue.push(t.add)}));if(r.remove){t.queue=_.reject(t.queue,function(e){e.product_id==t.remove.product_id});for(var a=0;a<t.queue.length;a++)t.queue[a].product_id==t.remove.product_id&&t.$apply(function(){t.queue.splice(a,1)})}else if(r.toggle)if(n(t.toggle))for(var a=0;a<t.queue.length;a++)t.queue[a].product_id==t.toggle.product_id&&t.$apply(function(){t.queue.splice(a,1)});else t.$apply(function(){t.queue.push(t.toggle)});else if(r.commit||r.commitQueued){var i=angular.copy(t.cart);if(t.commit)i.items.push({product_id:t.commit.product_id,cross_sell_id:t.commit.cross_sell_id,quantity:t.commit.quantity||1});else{if(0==t.commitQueued.length)return;_.each(t.commitQueued,function(e){i.items.push({product_id:e.product_id,cross_sell_id:e.cross_sell_id,quantity:e.quantity||1})})}return void e.update(i,t.params).then(function(e){t.cart=e,t.commitQueued=[],t.onSuccess&&t.onSuccess(e)},function(e){t.error=e,t.onError&&t.onError(e)})}})}}}]),app.factory("appCache",["$cacheFactory",function(e){return e("appCache")}]),app.filter("range",function(){return function(e,t,n,r){function r(e,t){var n=String(e);return n.length<t&&(n=utils.repeat(0,t-e.toString().length)+n),n}t=parseInt(t),n=parseInt(n);for(var o=t;o<=n;o++)r?e.push(r(o,n.toString().length)):e.push(o);return e}}),app.service("ApiService",["$http","$q","SettingsService","HelperService","StorageService","LanguageService","gettextCatalog",function(e,t,n,r,o,a,i){function u(){var r=t.defer(),u=o.get("token");if(null!=u)return r.resolve(u),r.promise;var l=n.get(),c={};c.user_locale=a.getLocale(),c.account_id=l.account.account_id,l.account.test&&(c.test=!0);var s=f("/auths/limited",l),d=e({ignoreLoadingBar:!1,method:"post",url:s+"?timezone=UTC",params:c,timeout:15e3,headers:{"Content-Type":"application/json"}});return d.then(function(e){o.set("token",e.data.token,e.headers("X-Token-Expires-In-Seconds")),o.remove("cart_id"),o.remove("invoice_id"),r.resolve(e.data.token)},function(e){var t=i.getString("There was a problem obtaining authorization for this session. Please reload the page to try your request again.");l.account.test&&403==e.data.error.status&&"insufficient_permissions"==e.data.error.code&&(t="This app is installed in test mode and can only be run by authorized test users. To run this app, launch it from within your account while in test mode. If you would like to allow unauthenticated users to run apps in test mode, sign into your account, and enable 'Allow Public Test Orders' under Settings> Technical."),r.reject({type:"internal_server_error",reference:"6lnOOW1",code:"unspecified_error",message:t,status:e.status})}),r.promise}function l(r,o,i,l){var c=t.defer();return i=i||{},i.user_locale=a.getLocale(),u().then(function(t){null==r&&(r=void 0);var a=n.get(),u=f(o,a),s=e({ignoreLoadingBar:l,method:"post",data:angular.toJson(r),url:u+"?timezone=UTC",params:i,timeout:65e3,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});s.then(function(e){h(e,c)},function(e){v(e,c)})},function(e){c.reject(e)}),c.promise}function c(r,o,i){var l=t.defer();return o=o||{},o.user_locale=a.getLocale(),u().then(function(t){var a=n.get(),u=f(r,a),c=e({ignoreLoadingBar:i,method:"get",url:u+"?timezone=UTC",params:o,timeout:15e3,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});c.then(function(e){h(e,l)},function(e){v(e,l)})},function(e){l.reject(e)}),l.promise}function s(r,o,i){var l=t.defer();return o=o||{},o.user_locale=a.getLocale(),u().then(function(t){var a=n.get(),u=f(r,a),c=utils.getQueryParameters(r);_.each(o,function(e,t){null!=c[t]&&delete c[t]}),r.indexOf("?")>0&&(r=r.substring(0,r.indexOf("?"))),r=utils.appendParams(r,c);var s=e({ignoreLoadingBar:i,method:"get",url:u,params:o,timeout:25e3,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});s.then(function(e){h(e,l)},function(e){v(e,l)})},function(e){l.reject(e)}),l.promise}function d(r,o,i,l){var c=t.defer();return i=i||{},i.user_locale=a.getLocale(),u().then(function(t){var a=n.get(),u=f(o,a);null==r&&(r=void 0);var s=e({ignoreLoadingBar:l,method:"post",data:angular.toJson(g(r)),url:u+"?timezone=UTC",params:i,timeout:25e3,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});s.then(function(e){h(e,c)},function(e){v(e,c)})},function(e){c.reject(e)}),c.promise}function p(r,o,i){var l=t.defer();return o=o||{},o.user_locale=a.getLocale(),u().then(function(t){var a=n.get(),u=f(r,a),c=e({ignoreLoadingBar:i,method:"delete",url:u+"?timezone=UTC",params:o,timeout:15e3,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}});c.then(function(e){h(e,l)},function(e){v(e,l)})},function(e){l.reject(e)}),l.promise}function m(r,o,i){var l=t.defer();return o=o||{},o.user_locale=a.getLocale(),u().then(function(t){var a=n.get(),u=f(r,a),c=e({ignoreLoadingBar:i,method:"get",url:u+"?timezone=UTC",params:o,timeout:15e3,responseType:"arraybuffer",headers:{Authorization:"Bearer "+t,Accept:"application/pdf"}});c.then(function(e){h(e,l)},function(e){v(e,l)})},function(e){l.reject(e)}),l.promise}function f(e,t){return"http://"==e.substring(0,7)||"https://"==e.substring(0,8)?e:t.config.apiPrefix+e}function g(e){if(null!=e&&"object"==typeof e){var t=JSON.parse(JSON.stringify(e));"cart"==t.object&&(delete t.options,delete t.shipping_item,delete t.payments,_.each(t.items,function(e){delete e.subscription_terms,delete e.url,delete e.date_created,delete e.date_modified,delete e.formatted,delete e.product,delete e.subscription_plan}),delete t.customer.url,delete t.customer.payments,delete t.customer.refunds,delete t.customer.orders,delete t.customer.subscriptions,delete t.customer.invoices,delete t.promotion),delete t.date_created,delete t.date_modified,delete t.object,delete t.url,delete t.test,delete t.account_id,delete t.formatted;
}return t}function h(e,t){return o.get("token")&&o.set("token",o.get("token"),e.headers("X-Token-Expires-In-Seconds")),t.resolve(e)}function v(e,t){var n={};e.data&&e.data.error&&(n=e.data.error);var o,a,u,l;if(n&&(n.type&&(o=n.type),n.code&&(u=n.code),n.reference&&(a=n.reference),n.message&&(l=n.message)),401==e.status&&"invalid_login"!=u&&"account_locked"!=u&&r.newSessionRedirect(!0,"Performing session reset due to invalid token in the cookie / request."),403==e.status&&(l="There was a problem establishing your session. Please reload the page to try again."),!l)switch(e.status){case 404:o="not_found",a="4jnJPb7",u="resource_not_found",l=i.getString("The item you are trying to access could not be found.");break;default:o="internal_server_error",a="XEnf9FY",u="unspecified_error",l=i.getString("An error occured while attempting to process your request. Please try your request again. If the problem persists, please contact support.")}n.type=o,n.reference=a,n.code=u,n.message=l,n.status=e.status,t.reject(n)}return{create:l,getItem:c,getList:s,update:d,remove:p,getItemPdf:m}}]),app.service("CartService",["$http","$q","$rootScope","ApiService","PaymentService","SettingsService","HelperService","StorageService","LanguageService",function(e,t,n,r,o,a,i,u,l){function c(e,n,o,a){var i=t.defer();n=b(n);var l=u.get("currency");l&&(e.currency=l);var s="/carts";return r.create(e,s,n,o).then(function(e){var t=e.data;u.set("cart_id",t.cart_id,e.headers("X-Token-Expires-In-Seconds")),y(t.currency),i.resolve(t)},function(t){"invalid_promotion_code"==t.code&&a?(delete e.promotion_code,c(e,n,o,!1).then(function(e){i.resolve(e)},function(e){i.reject(e)})):i.reject(t)}),i.promise}function s(e,n){var o=t.defer();e=b(e);var a=u.get("cart_id"),l={billing_address:{},shipping_address:{}},c={items:[],customer:l};if(a){var s="/carts/"+a;r.getItem(s,e,n).then(function(e){var t=e.data;null==t.customer&&(t.customer=l),null==t.customer.billing_address.country&&(t.customer.billing_address.country=t.customer_ip_country),null==t.customer.shipping_address.country&&(t.customer.shipping_address.country=t.customer_ip_country),y(t.currency),o.resolve(t)},function(e){404==e.status&&i.newSessionRedirect(!0,"Performing a session reset due to an invalid cart_id in the cookie / request. (404 - cart not found)"),o.reject(e)})}else o.resolve(c);return o.promise}function d(e,n,o,a){var l=t.defer();n=b(n);var s=u.get("cart_id");if(s){var p="/carts/"+s;return r.update(e,p,n,o).then(function(e){var t=e.data;u.set("cart_id",t.cart_id,e.headers("X-Token-Expires-In-Seconds")),y(t.currency),l.resolve(t)},function(t){"invalid_promotion_code"==t.code&&a?(delete e.promotion_code,d(e,n,o,!1).then(function(e){l.resolve(e)},function(e){l.reject(e)})):(404==t.status&&i.newSessionRedirect(!0,"Performing a session reset due to an invalid cart_id in the cookie / request. (404 - cart not found)"),"invalid_state"==t.code&&(u.remove("cart_id"),i.newSessionRedirect(!1,"Performing a cart_id reset due to an invalid cart_id in the cookie / request. (422 - invalid state): "+t.message)),l.reject(t))}),l.promise}return c(e,n,o,a)}function p(e,n,o){var a=t.defer();n=b(n);var l=u.get("cart_id"),c="/carts/"+l+"/login";return r.update(e,c,n,o).then(function(e){var t=e.data;u.set("cart_id",t.cart_id,e.headers("X-Token-Expires-In-Seconds")),y(t.currency),a.resolve(t)},function(e){404==e.status&&i.newSessionRedirect(!0,"Performing a session reset due to an invalid cart_id in the cookie / request. (404 - cart not found)"),a.reject(e)}),a.promise}function m(e,n){var o=t.defer();e=b(e);var a=u.get("cart_id"),l="/carts/"+a+"/logout";return r.update(null,l,e,n).then(function(e){var t=e.data;u.set("cart_id",t.cart_id,e.headers("X-Token-Expires-In-Seconds")),y(t.currency),o.resolve(t)},function(e){404==e.status&&i.newSessionRedirect(!0,"Performing a session reset due to an invalid cart_id in the cookie / request. (404 - cart not found)"),o.reject(e)}),o.promise}function f(e,n,o){var a=t.defer();return null==e?(a.reject({type:"bad_request",reference:"vbVcrcF",code:"invalid_input",message:"You must supply an item to add to the cart.",status:400}),a.promise):(n=b(n),s(n).then(function(t){if(t.url){var i=_.findWhere(t.items,e);null!=i?r.update(e,i.url,n,o).then(function(e){var t=e.data;y(t.currency),a.resolve(t)},function(e){a.reject(e)}):r.create(e,t.url+"/items",n,o).then(function(e){var t=e.data;y(t.currency),a.resolve(t)},function(e){a.reject(e)})}else t.items.push(e),c(t,n,o).then(function(t){a.resolve(_.findWhere(t.items,{item_id:e.product_id}))},function(e){a.reject(e)})},function(e){a.reject(e)}),a.promise)}function g(e,t){return s(e,t).then(function(e){y(e.currency),deferred.resolve(e.items)},function(e){deferred.reject(e)}),deferred.promise}function h(e,n,r,a,i){var l=t.defer();r=b(r);var s=function(t,n){var a="/carts/"+e.cart_id+"/payments";o.create(n,a,r,i).then(function(e){"completed"!=e.status&&"pending"!=e.status||u.remove("cart_id"),l.resolve(e)},function(e){l.reject(e)})},p=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return e&&null!=e.cart_id?d(e,a,i).then(function(t){p(e,t),s(e.cart_id,n)},function(t){p(e,data),l.reject(t)}):c(e,a,i).then(function(t){p(e,t),s(e.cart_id,n)},function(e){l.reject(e)}),l.promise}function v(e,t){var n=t.search();utils.stringToBool(n.empty_cart)&&(e.items=[],t.search("empty_cart",null));for(var r in n)if(n.hasOwnProperty(r)&&"product_id:"==utils.left(r,11)){var o={product_id:r.substring(11)};0==utils.isValidInteger(n[r])?o.quantity=1:o.quantity=n[r];var a=_.find(e.items,function(e){return e.product_id==o.product_id});null!=a&&(e.items=_.reject(e.items,function(e){return e.product_id==o.product_id})),e.items=e.items||[],e.items.push(o),t.search(r,null)}n.promotion_code&&(e.promotion_code=n.promotion_code,t.search("promotion_code",null)),n.currency&&(e.currency=n.currency,t.search("currency",null)),n.name&&(e.customer.name=n.name,t.search("name",null)),n.email&&(utils.isValidEmail(n.email)&&(e.customer.email=n.email),t.search("email",null)),n.referrer&&(e.referrer=n.referrer,t.search("referrer",null)),n.affiliate_id&&(e.affiliate_id=n.affiliate_id,t.search("affiliate_id",null)),0==_.size(e.customer)&&delete e.customer,n.language&&(l.setLanguage(n.language),t.search("language",null)),n=t.search();for(var r in n)n.hasOwnProperty(r)&&(null==e.meta&&(e.meta={}),e.meta[r]=n[r]);return e}function y(e){var t=u.get("currency");e!=t&&(u.set("currency",e),n.$emit("currencyChanged",e))}function b(e,t){var n=angular.copy(e);return n?(n.formatted=!0,delete n.show,n):{formatted:!0,options:!0}}return{create:c,get:s,update:d,addItem:f,getItems:g,pay:h,login:p,logout:m,fromParams:v}}]),app.service("InvoiceService",["$http","$q","$rootScope","ApiService","PaymentService","SettingsService","HelperService","StorageService","$location",function(e,t,n,r,o,a,i,u,l){function c(e,n){var o=t.defer();e=m(e);var a=l.search().invoice_id;a||(a=u.get("invoice_id"));var c="/invoices/"+a;return r.getItem(c,e,n).then(function(e){var t=e.data;u.set("invoice_id",t.invoice_id),p(t.currency),o.resolve(t)},function(e){404==e.status&&(l.search("invoice_id",null),u.remove("invoice_id"),i.newSessionRedirect(!1,"Performing a redirect due to an invalid invoice_id in the cookie / request. (404 - invoice not found)")),o.reject(e)}),o.promise}function s(e,n,o){var a=t.defer();n=m(n);var l=u.get("invoice_id"),c="/invoices/"+l;return r.update(e,c,n,o).then(function(e){var t=e.data;u.set("invoice_id",t.invoice_id,e.headers("X-Token-Expires-In-Seconds")),p(t.currency),a.resolve(t)},function(e){404==e.status&&i.newSessionRedirect(!0,"Performing a session reset due to an invalid invoice_id in the cookie / request. (404 - invoice not found)"),a.reject(e)}),a.promise}function d(e,n,r,a){var i=t.defer();r=m(r);var l=function(t,n){var l="/invoices/"+e.invoice_id+"/payments";o.create(n,l,r,a).then(function(e){"completed"!=e.status&&"pending"!=e.status||u.remove("invoice_id"),i.resolve(e)},function(e){i.reject(e)})};return l(e.invoice_id,n),i.promise}function p(e){var t=u.get("currency");e!=t&&(u.set("currency",e),n.$emit("currencyChanged",e))}function m(e,t){var n=angular.copy(e);return n?(n.formatted=!0,delete n.show,n):{formatted:!0,options:!0}}return{get:c,update:s,pay:d}}]),app.service("PaymentService",["$http","$q","ApiService","SettingsService","StorageService","LanguageService",function(e,t,n,r,o,a){function i(e,r,o,a){var i=t.defer();o=m(o);var u={payment_method:e};return n.create(u,r,o,a).then(function(e){var t=e.data;i.resolve(t)},function(e){i.reject(e)}),i.promise}function u(e,r,o){var a=t.defer();return r=m(r),n.update(e,"/payments/"+e.payment_id,r,o).then(function(e){var t=e.data;a.resolve(t)},function(e){a.reject(e)}),a.promise}function l(e,r,o){var a=t.defer();r=m(r);var i="/payments";return n.create(e,i,r,o).then(function(e){var t=e.data;a.resolve(t)},function(e){a.reject(e)}),a.promise}function c(e,r,o){var a=t.defer();if(r=m(r),e){var i="/payments/"+e;n.getItem(i,r,o).then(function(e){var t=e.data;a.resolve(t)},function(e){a.reject(e)})}else a.reject({type:"bad_request",reference:"HdPWrih",code:"invalid_input",message:"You request contained invalid data and could not be processed.",status:400}),console.log("Your request for a payment must include a payment_id.");return a.promise}function s(e,r){var o=t.defer(),a="/payments/options";return n.getItem(a,e,r).then(function(e){var t=e.data;o.resolve(t)},function(e){o.reject(e)}),o.promise}function d(e,r,a){var i="/payments/"+e+"/commit",u=t.defer();return r=m(r),n.create(null,i,r,a).then(function(e){var t=e.data;"completed"!=t.status&&"pending"!=t.status||(o.remove("cart_id"),o.remove("invoice_id")),u.resolve(t)},function(e){u.reject(e)}),u.promise}function p(e,t){e=e||{};var n=angular.copy(t.search());n.currency&&(e.currency=n.currency,delete n.currency,t.search("currency",null)),n.total&&utils.isValidNumber(n.total)&&(e.total=n.total,delete n.total,t.search("total",null)),e.total||(n.subtotal&&utils.isValidNumber(n.subtotal)&&(e.subtotal=n.subtotal,delete n.subtotal,t.search("subtotal",null)),n.shipping&&utils.isValidNumber(n.shipping)&&(e.shipping=n.shipping,delete n.shipping,t.search("shipping",null)),n.tax&&utils.isValidNumber(n.tax)&&(e.tax=n.tax,delete n.tax,t.search("tax",null))),n.reference&&(e.reference=n.reference,delete n.reference,t.search("reference",null)),n.description&&(e.description=n.description,delete n.description,t.search("description",null)),e.customer=e.customer||{},n.company_name&&(e.customer.company_name=n.company_name,delete n.company_name),n.name&&(e.customer.name=n.name,delete n.name),n.email&&(utils.isValidEmail(n.email)&&(e.customer.email=n.email),delete n.email),n.referrer&&(e.referrer=n.referrer,delete n.referrer),n.language&&(a.setLanguage(n.language),t.search("language",null));for(var r in n)n.hasOwnProperty(r)&&(null==e.meta&&(e.meta={}),e.meta[r]=n[r]);return e}function m(e,t){return e?(e.formatted=!0,null==e.expand?e.expand="response_data,payment_method":("-1"==e.expand.indexOf("response_data")&&(e.expand+=",response_data"),"-1"==e.expand.indexOf("payment_method")&&(e.expand+=",payment_method")),e):{formatted:!0,expand:"response_data,payment_method"}}return{create:i,createDirect:l,get:c,update:u,getOptions:s,commit:d,fromParams:p}}]),app.service("OrderService",["$http","$q","ApiService",function(e,t,n){function r(e,r,a){var i=t.defer();if(r=o(r),e){var u="/orders/"+e;n.getItem(u,r,a).then(function(e){var t=e.data;i.resolve(t)},function(e){i.reject(e)})}else i.reject({type:"bad_request",reference:"HdPWrih",code:"invalid_input",message:"The order you are trying to view cannot be found.",status:400}),console.log("The order_id was not provided.");return i.promise}function o(e,t){return e?(e.formatted=!0,e):{formatted:!0}}return{get:r}}]),app.service("CustomerService",["$http","$q","ApiService",function(e,t,n){function r(e,r,o){var a=t.defer();if(e.customer_id){var i="/customers/"+e.customer_id;n.update(e,i,r,o).then(function(e){a.resolve(e.data)},function(e){a.reject(e)})}else a.reject({type:"bad_request",reference:"8b1oMYs",code:"invalid_input",message:"The request could not be completed.",status:400}),console.log("The customer object in the account creation request did not contain a customer_id.");return a.promise}function o(e,r,o){var a=t.defer(),i="/customers/login";return n.create(e,i,r,o).then(function(e){var t=e.data;a.resolve(t)},function(e){a.reject(e)}),a.promise}return{createAccount:r,login:o}}]),app.service("ProductService",["$http","$q","ApiService","CurrencyService",function(e,t,n,r){function o(e,o,a){var u=t.defer();if(o=i(o),e){var l="/products/"+e;n.getItem(l,o,a).then(function(e){var t=e.data;null==r.getCurrency()&&r.setCurrency(t.currency),u.resolve(t)},function(e){u.reject(e)})}else u.reject({type:"bad_request",reference:"IrUQTRv",code:"invalid_input",message:"The product you are trying to view cannot be found.",status:400}),console.log("The product_id was not provided.");return u.promise}function a(e,o){var a=t.defer();e=i(e);var u="/products";return n.getList(u,e,o).then(function(e){var t=e.data;null==r.getCurrency()&&t.data[0]&&r.setCurrency(t.data[0].currency),a.resolve(t)},function(e){a.reject(e)}),a.promise}function i(e,t){return e?(e.formatted=!0,e):{formatted:!0}}return{get:o,getList:a}}]),app.service("GeoService",[function(){function e(){var e={};return e.countries=[{name:"Afghanistan",code:"AF"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia, Plurinational State of",code:"BO"},{name:"Bonaire, Sint Eustatius and Saba",code:"BQ"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, the Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote d Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Curacao",code:"CW"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands",code:"AX"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guine Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and McDonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao Peoples Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia",code:"FM"},{name:"Moldova",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint BarthÃ©lemy",code:"BL"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Martin French",code:"MF"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Sint Maarten Dutch",code:"SX"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Sudan",code:"SS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands British",code:"VG"},{name:"Virgin Islands U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}],e.usStates=[{name:"Alabama",code:"AL"},{name:"Alaska",code:"AK"},{name:"American Samoa",code:"AS"},{name:"Arizona",code:"AZ"},{name:"Arkansas",code:"AR"},{name:"California",code:"CA"},{name:"Colorado",code:"CO"},{name:"Connecticut",code:"CT"},{name:"Delaware",code:"DE"},{name:"District Of Columbia",code:"DC"},{name:"Federated States Of Micronesia",code:"FM"},{name:"Florida",code:"FL"},{name:"Georgia",code:"GA"},{name:"Guam",code:"GU"},{name:"Hawaii",code:"HI"},{name:"Idaho",code:"ID"},{name:"Illinois",code:"IL"},{name:"Indiana",code:"IN"},{name:"Iowa",code:"IA"},{name:"Kansas",code:"KS"},{name:"Kentucky",code:"KY"},{name:"Louisiana",code:"LA"},{name:"Maine",code:"ME"},{name:"Marshall Islands",code:"MH"},{name:"Maryland",code:"MD"},{name:"Massachusetts",code:"MA"},{name:"Michigan",code:"MI"},{name:"Minnesota",code:"MN"},{name:"Mississippi",code:"MS"},{name:"Missouri",code:"MO"},{name:"Montana",code:"MT"},{name:"Nebraska",code:"NE"},{name:"Nevada",code:"NV"},{name:"New Hampshire",code:"NH"},{name:"New Jersey",code:"NJ"},{name:"New Mexico",code:"NM"},{name:"New York",code:"NY"},{name:"North Carolina",code:"NC"},{name:"North Dakota",code:"ND"},{name:"Northern Mariana Islands",code:"MP"},{name:"Ohio",code:"OH"},{name:"Oklahoma",code:"OK"},{name:"Oregon",code:"OR"},{name:"Palau",code:"PW"},{name:"Pennsylvania",code:"PA"},{name:"Puerto Rico",code:"PR"},{name:"Rhode Island",code:"RI"},{name:"South Carolina",code:"SC"},{name:"South Dakota",code:"SD"},{name:"Tennessee",code:"TN"},{name:"Texas",code:"TX"},{name:"Utah",code:"UT"},{name:"Vermont",code:"VT"},{name:"Virgin Islands",code:"VI"},{name:"Virginia",code:"VA"},{name:"Washington",code:"WA"},{name:"West Virginia",code:"WV"},{name:"Wisconsin",code:"WI"},{name:"Wyoming",code:"WY"},{name:"U.S. Armed Forces Americas",code:"AA"},{name:"U.S. Armed Forces Europe",code:"AE"},{name:"U.S. Armed Forces Pacific",code:"AP"}],e.caProvinces=[{code:"AB",name:"Alberta"},{code:"BC",name:"British Columbia"},{code:"MB",name:"Manitoba"},{code:"NB",name:"New Brunswick"},{code:"NL",name:"Newfoundland"},{code:"NS",name:"Nova Scotia"},{code:"NU",name:"Nunavut"},{code:"NW",name:"Northwest Territories"},{code:"ON",name:"Ontario"},{code:"PE",name:"Prince Edward Island"},{code:"QC",name:"Quebec"},{code:"SK",name:"Saskatchewen"},{code:"YT",name:"Yukon"}],e}function t(t){var n=e();return"US"==t?n.usStates:"CA"==t?n.caProvinces:null}function n(e){var t=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB"];return t.indexOf(e)>-1}function r(e){var t={AED:"Ø¯.Ø¥",AFN:"Ø",ALL:"L",AMD:"Ö",ANG:"Æ",AOA:"Kz",ARS:"$",AUD:"$",AWG:"Æ",AZN:"Ð¼Ð°Ð½",BAM:"KM",BBD:"$",BDT:"à§³",BGN:"Ð»Ð²",BHD:".Ø¯.Ø¨",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BRL:"R$",BSD:"$",BTC:"à¸¿",BTN:"Nu.",BWP:"P",BYR:"p.",BZD:"BZ$",CAD:"$",CDF:"FC",CHF:"CHF",CLP:"$",CNY:"Â¥",COP:"$",CRC:"â¡",CUC:"$",CUP:"â±",CVE:"$",CZK:"KÄ",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"Ø¯Ø¬",EEK:"kr",EGP:"Â£",ERN:"Nfk",ETB:"Br",ETH:"Î",EUR:"â¬",FJD:"$",FKP:"Â£",GBP:"Â£",GEL:"â¾",GGP:"Â£",GHC:"âµ",GHS:"GHâµ",GIP:"Â£",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"âª",IMP:"Â£",INR:"â¹",IQD:"Ø¹.Ø¯",IRR:"ï·¼",ISK:"kr",JEP:"Â£",JMD:"J$",JOD:"JD",JPY:"Â¥",KES:"KSh",KGS:"Ð»Ð²",KHR:"á",KMF:"CF",KPW:"â©",KRW:"â©",KWD:"KD",KYD:"$",KZT:"Ð»Ð²",LAK:"â­",LBP:"Â£",LKR:"â¨",LRD:"$",LSL:"M",LTC:"Å",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"Ð´ÐµÐ½",MMK:"K",MNT:"â®",MOP:"MOP$",MRO:"UM",MUR:"â¨",MVR:"Rf",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MT",NAD:"$",NGN:"â¦",NIO:"C$",NOK:"kr",NPR:"â¨",NZD:"$",OMR:"ï·¼",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"â±",PKR:"â¨",PLN:"zÅ",PYG:"Gs",QAR:"ï·¼",RMB:"ï¿¥",RON:"lei",RSD:"ÐÐ¸Ð½.",RUB:"â½",RWF:"Râ£",SAR:"ï·¼",SBD:"$",SCR:"â¨",SDG:"Ø¬.Ø³.",SEK:"kr",SGD:"$",SHP:"Â£",SLL:"Le",SOS:"S",SRD:"$",SSP:"Â£",STD:"Db",SVC:"$",SYP:"Â£",SZL:"E",THB:"à¸¿",TJS:"SM",TMT:"T",TND:"Ø¯.Øª",TOP:"T$",TRL:"â¤",TRY:"âº",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"â´",UGX:"USh",USD:"$",UYU:"$U",UZS:"Ð»Ð²",VEF:"Bs",VND:"â«",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"É",XCD:"$",XOF:"CFA",XPF:"â£",YER:"ï·¼",ZAR:"R",ZWD:"Z$"};return t[e]||""}return{getData:e,getStatesProvs:t,isEu:n,getCurrencySymbol:r}}]),app.service("CurrencyService",["$q","$rootScope","SettingsService","CartService","InvoiceService","StorageService","ApiService",function(e,t,n,r,o,a,i){function u(){return a.get("currency")}function l(){var e=u(),t=n.get(),r=null;return _.each(t.account.currencies,function(t){t.code==e&&(r=t.name)}),r}function c(e){a.set("currency",e),t.$emit("currencyChanged",e)}return{getCurrency:u,getCurrencyName:l,setCurrency:c}}]),app.service("LanguageService",["$q","$rootScope","SettingsService","StorageService","gettextCatalog",function(e,t,n,r,o){function a(){return t.languages?t.languages:[{code:"en",name:"English"}]}function i(){var e=a(),t=r.get("language");return t=_.findWhere(e,{code:t}),t?t:{name:null,code:null}}function u(e){var t=a();return!(null==_.findWhere(t,{code:e}))}function l(e,n){if(0!=u(e)){r.set("language",e);var i=a();t.language=_.find(i,function(t){return t.code==e}),o.setCurrentLanguage(e),t.$emit("languageChanged",e),"en"!=e&&o.loadRemote((n||"languages/")+e+"/"+e+".json")}}function c(e){var t=i();if(t.code&&u(t.code))return void l(t.code,e);var r=null,o=null;if(n.get().account.browser_info){if(r=n.get().account.browser_info.locale,u(r))return void l(r,e);if(o=n.get().account.browser_info.language,u(o))return void l(o,e);var c=_.find(a(),function(e){return e.code.substring(0,2)==o});if(c)return void l(c.code,e)}}function s(){var e=null;n.get().account.browser_info&&(e=n.get().account.browser_info.locale);var t=i().code;return e&&e.length>=2&&t&&t.length>=2&&e.substring(0,2).toLowerCase()==t.substring(0,2).toLowerCase()?e:t}return{getSelectedLanguage:i,getLanguages:a,setLanguage:l,establishLanguage:c,getLocale:s}}]),app.service("SettingsService",[function(e,t){function n(){var e=function(){var e={};window.__settings&&window.__settings.account&&(e=window.__settings.account),e.date_utc||(e.date_utc=utils.getCurrentIsoDate(!0));var t=new Date(e.date_utc);return e.year=t.getFullYear(),e.month=t.getMonth(),e.date=t.getDate(),e},t=function(){var e={};return window.__settings&&window.__settings.app&&(e=window.__settings.app),e},n=function(){var e={};return window.__settings&&window.__settings.style&&(e=window.__settings.style),e},r={account:e(),app:t(),style:n(),config:{}};if(r.config.apiPrefix="/api/v1",r.config.development=!1,r.account.development||r.app.development||r.style.development){r.config.development=!0;var o=r.account.api_host||r.app.api_host||r.style.api_host||"api.comecero.com";o="https://"+o,r.config.apiPrefix=o+r.config.apiPrefix}return r}return{get:n}}]),app.service("HelperService",["SettingsService","StorageService","$location",function(e,t,n){function r(e,t,n){if(!e||!t)return!1;var r=!1;return"shipping_address."==e.substring(0,17)&&(e="billing_address."+e.substring(17),r=!0),"billing_address.name"==e&&(e="name"),n!==!0&&(!!t.customer_required_fields&&t.customer_required_fields.indexOf(e)>=0)}function o(e,t,n){if(!e||!t)return!1;var r=!1;return"shipping_address."==e.substring(0,17)&&(e="billing_address."+e.substring(17),r=!0),"billing_address.name"==e&&(e="name"),n!==!0&&(!!t.customer_optional_fields&&t.customer_optional_fields.indexOf(e)>=0)}function a(e,t,n){return!(!e||!t)&&(!(!t.customer_required_fields||!r(e,t,n))||!(!t.customer_optional_fields||!o(e,t,n)))}function u(e,t){for(i=0;i<t.customer_required_fields.length;i++)if("billing_address."==t.customer_required_fields[i].substring(0,16)){if(!e.billing_address[t.customer_required_fields[i].substring(16)])return!1}else if(!e[t.customer_required_fields[i]])return!1;return!0}function l(e){return!!(e&&e.shipping_address&&e.shipping_address.address_1)}function c(r,o){console.log(o),r===!0&&(t.remove("cart_id"),t.remove("invoice_id"),t.remove("token"));var a=e.get().app;a.main_shopping_url?window.location.replace(a.main_shopping_url):"/"!=n.path()?(n.path("/"),n.replace()):window.location.reload()}function s(){var t=e.get().app;return null==t.main_shopping_url?window.location.href.substring(0,window.location.href.indexOf("#"))+"#/":t.main_shopping_url}function d(e){return null!=_.find(e,function(e){return null!=e.subscription_plan})}function p(e){return null!=_.find(e,function(e){return"physical"==e.type})}function m(e,t){return!(!e||!t)&&null!=_.find(t.payment_methods,function(t){return t.payment_method_type==e})}return{isRequiredCustomerField:r,isOptionalCustomerField:o,isCustomerField:a,hasRequiredFields:u,hasShippingAddress:l,newSessionRedirect:c,getShoppingUrl:s,hasSubscription:d,hasPhysical:p,supportsPaymentMethod:m}}]),app.service("StorageService",["appCache",function(e){function t(t){var n=e.get(t);return null==n&&(n=utils.getCookie(t)),n}function n(t,n,r){e.put(t,n),null==r&&(r=1209600),utils.setCookie(t,n,r/60)}function r(t){e.remove(t),utils.deleteCookie(t)}return{get:t,set:n,remove:r}}]);